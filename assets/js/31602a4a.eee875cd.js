"use strict";(self.webpackChunkyearn_devdocs=self.webpackChunkyearn_devdocs||[]).push([[5747],{67353:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>i,default:()=>o,frontMatter:()=>d,metadata:()=>l,toc:()=>a});var s=t(74848),n=t(28453);const d={},i="CommonReportTrigger",l={id:"v3/smart-contracts/periphery/CommonReportTrigger",title:"CommonReportTrigger",description:"Git Source",source:"@site/docs/developers/v3/smart-contracts/periphery/CommonReportTrigger.md",sourceDirName:"v3/smart-contracts/periphery",slug:"/v3/smart-contracts/periphery/CommonReportTrigger",permalink:"/developers/v3/smart-contracts/periphery/CommonReportTrigger",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1718899246e3,frontMatter:{},sidebar:"mySidebar",previous:{title:"Clonable",permalink:"/developers/v3/smart-contracts/periphery/Clonable"},next:{title:"DebtAllocator",permalink:"/developers/v3/smart-contracts/periphery/DebtAllocator"}},c={},a=[{value:"State Variables",id:"state-variables",level:2},{value:"name",id:"name",level:3},{value:"baseFeeProvider",id:"basefeeprovider",level:3},{value:"acceptableBaseFee",id:"acceptablebasefee",level:3},{value:"customStrategyTrigger",id:"customstrategytrigger",level:3},{value:"customStrategyBaseFee",id:"customstrategybasefee",level:3},{value:"customVaultTrigger",id:"customvaulttrigger",level:3},{value:"customVaultBaseFee",id:"customvaultbasefee",level:3},{value:"Functions",id:"functions",level:2},{value:"constructor",id:"constructor",level:3},{value:"setCustomStrategyTrigger",id:"setcustomstrategytrigger",level:3},{value:"setCustomStrategyBaseFee",id:"setcustomstrategybasefee",level:3},{value:"setCustomVaultTrigger",id:"setcustomvaulttrigger",level:3},{value:"setCustomVaultBaseFee",id:"setcustomvaultbasefee",level:3},{value:"strategyReportTrigger",id:"strategyreporttrigger",level:3},{value:"defaultStrategyReportTrigger",id:"defaultstrategyreporttrigger",level:3},{value:"vaultReportTrigger",id:"vaultreporttrigger",level:3},{value:"defaultVaultReportTrigger",id:"defaultvaultreporttrigger",level:3},{value:"strategyTendTrigger",id:"strategytendtrigger",level:3},{value:"getCurrentBaseFee",id:"getcurrentbasefee",level:3},{value:"isCurrentBaseFeeAcceptable",id:"iscurrentbasefeeacceptable",level:3},{value:"setBaseFeeProvider",id:"setbasefeeprovider",level:3},{value:"setAcceptableBaseFee",id:"setacceptablebasefee",level:3},{value:"Events",id:"events",level:2},{value:"NewBaseFeeProvider",id:"newbasefeeprovider",level:3},{value:"UpdatedAcceptableBaseFee",id:"updatedacceptablebasefee",level:3},{value:"UpdatedCustomStrategyTrigger",id:"updatedcustomstrategytrigger",level:3},{value:"UpdatedCustomStrategyBaseFee",id:"updatedcustomstrategybasefee",level:3},{value:"UpdatedCustomVaultTrigger",id:"updatedcustomvaulttrigger",level:3},{value:"UpdatedCustomVaultBaseFee",id:"updatedcustomvaultbasefee",level:3}];function h(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h1,{id:"commonreporttrigger",children:"CommonReportTrigger"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.a,{href:"https://github.com/yearn/tokenized-strategy-periphery/blob/master/src/ReportTrigger/CommonReportTrigger.sol",children:"Git Source"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Inherits:"}),"\n",(0,s.jsx)(r.a,{href:"./Governance",children:"Governance"})]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Author:"}),"\nYearn.finance"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"This is a central contract that keepers can use\nto decide if Yearn V3 strategies should report profits as\nwell as when a V3 Vaults should record a strategies profits.\nIt allows for a simple default flow that most strategies\nand vaults can use for easy integration with a keeper network.\nHowever, it is also customizable by the strategy and vaults\nmanagement to allow complete customization if desired."})}),"\n",(0,s.jsx)(r.h2,{id:"state-variables",children:"State Variables"}),"\n",(0,s.jsx)(r.h3,{id:"name",children:"name"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:'string public name = "Yearn Common Report Trigger";\n'})}),"\n",(0,s.jsx)(r.h3,{id:"basefeeprovider",children:"baseFeeProvider"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"address public baseFeeProvider;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"acceptablebasefee",children:"acceptableBaseFee"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"uint256 public acceptableBaseFee;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"customstrategytrigger",children:"customStrategyTrigger"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"mapping(address => address) public customStrategyTrigger;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"customstrategybasefee",children:"customStrategyBaseFee"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"mapping(address => uint256) public customStrategyBaseFee;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"customvaulttrigger",children:"customVaultTrigger"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"mapping(address => mapping(address => address)) public customVaultTrigger;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"customvaultbasefee",children:"customVaultBaseFee"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"mapping(address => mapping(address => uint256)) public customVaultBaseFee;\n"})}),"\n",(0,s.jsx)(r.h2,{id:"functions",children:"Functions"}),"\n",(0,s.jsx)(r.h3,{id:"constructor",children:"constructor"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"constructor(address _governance) Governance(_governance);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"setcustomstrategytrigger",children:"setCustomStrategyTrigger"}),"\n",(0,s.jsx)(r.p,{children:"Set a custom report trigger contract for a strategy."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["This gives the ",(0,s.jsx)(r.code,{children:"management"})," of a specific strategy the option\nto enforce a custom report trigger for their strategy easily while\nstill using this standard contract for keepers to read the trigger\nstatus from.\nThe custom trigger contract only needs to implement the ",(0,s.jsx)(r.code,{children:"reportTrigger"}),"\nfunction to return true or false."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function setCustomStrategyTrigger(address _strategy, address _trigger) external virtual;\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_strategy"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the strategy to set the trigger for."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_trigger"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the custom trigger contract."})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"setcustomstrategybasefee",children:"setCustomStrategyBaseFee"}),"\n",(0,s.jsx)(r.p,{children:"Set a custom base fee for a specific strategy."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["This can be set by a strategies ",(0,s.jsx)(r.code,{children:"management"})," to increase or\ndecrease the acceptable network base fee for a specific strategies\ntrigger to return true.\nThis can be used instead of a custom trigger contract.\nThis will have no effect if a custom trigger is set for the strategy."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function setCustomStrategyBaseFee(address _strategy, uint256 _baseFee) external virtual;\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_strategy"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the strategy to customize."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_baseFee"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"The max acceptable network base fee."})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"setcustomvaulttrigger",children:"setCustomVaultTrigger"}),"\n",(0,s.jsx)(r.p,{children:"Set a custom report trigger contract for a vaults strategy."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["This gives the management of a vault the option to enforce a\ncustom report trigger for a specific strategy attached to the vault\nwhile still using this standard contract for keepers to read the\ntrigger status from.\nThe address calling must have the ",(0,s.jsx)(r.code,{children:"ADD_STRATEGY_MANAGER"})," role on the vault.\nThe custom trigger contract only needs to implement the ",(0,s.jsx)(r.code,{children:"reportTrigger"}),"\nfunction to return true or false."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function setCustomVaultTrigger(address _vault, address _strategy, address _trigger) external virtual;\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_vault"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the vault"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_strategy"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the strategy to set the trigger for."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_trigger"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the custom trigger contract."})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"setcustomvaultbasefee",children:"setCustomVaultBaseFee"}),"\n",(0,s.jsx)(r.p,{children:"Set a custom base fee for a vaults strategy."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["This can be set by the vaults management to increase or\ndecrease the acceptable network base fee for a specific strategies\ntrigger to return true.\nThis can be used instead of a custom trigger contract.\nThis will have no effect if a custom trigger is set for the strategy.\nThe address calling must have the ",(0,s.jsx)(r.code,{children:"ADD_STRATEGY_MANAGER"})," role on the vault."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function setCustomVaultBaseFee(address _vault, address _strategy, uint256 _baseFee) external virtual;\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_vault"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the vault."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_strategy"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the strategy to customize."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_baseFee"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"The max acceptable network base fee."})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"strategyreporttrigger",children:"strategyReportTrigger"}),"\n",(0,s.jsxs)(r.p,{children:["Returns wether or not a strategy is ready for a keeper to call ",(0,s.jsx)(r.code,{children:"report"}),"."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"Will first check if a custom trigger is set. If not it will use\nthe default trigger flow."})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function strategyReportTrigger(address _strategy) external view virtual returns (bool, bytes memory);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_strategy"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the strategy to check the trigger for."})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bool"})}),(0,s.jsx)(r.td,{children:". Bool representing if the strategy is ready to report."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bytes"})}),(0,s.jsx)(r.td,{children:". Bytes with either the calldata or reason why False."})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"defaultstrategyreporttrigger",children:"defaultStrategyReportTrigger"}),"\n",(0,s.jsx)(r.p,{children:"The default trigger logic for a strategy."}),"\n",(0,s.jsx)(r.p,{children:"*This is kept in a separate function so it can still\nbe used by custom triggers even if extra checks are needed\nfirst or after.\nThis will also check if a custom acceptable base fee has been set\nby the strategies management.\nIn order for the default flow to return true the strategy must:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"Not be shutdown."}),"\n",(0,s.jsx)(r.li,{children:"Have funds."}),"\n",(0,s.jsxs)(r.li,{children:["The current network base fee be below the ",(0,s.jsx)(r.code,{children:"acceptableBaseFee"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["The time since the last report be > the strategies ",(0,s.jsx)(r.code,{children:"profitMaxUnlockTime"}),".*"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function defaultStrategyReportTrigger(address _strategy) public view virtual returns (bool, bytes memory);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_strategy"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the strategy to check the trigger for."})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bool"})}),(0,s.jsx)(r.td,{children:". Bool representing if the strategy is ready to report."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bytes"})}),(0,s.jsx)(r.td,{children:". Bytes with either the calldata or reason why False."})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"vaultreporttrigger",children:"vaultReportTrigger"}),"\n",(0,s.jsx)(r.p,{children:"Return wether or not a report should be called on a vault for\na specific strategy."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"Will first check if a custom trigger is set. If not it will use\nthe default trigger flow."})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function vaultReportTrigger(address _vault, address _strategy) external view virtual returns (bool, bytes memory);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_vault"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the vault."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_strategy"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the strategy to report."})]})]})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bool"})}),(0,s.jsx)(r.td,{children:". Bool if the strategy should report to the vault."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bytes"})}),(0,s.jsx)(r.td,{children:". Bytes with either the calldata or reason why False."})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"defaultvaultreporttrigger",children:"defaultVaultReportTrigger"}),"\n",(0,s.jsx)(r.p,{children:"The default trigger logic for a vault."}),"\n",(0,s.jsxs)(r.p,{children:["*This is kept in a separate function so it can still\nbe used by custom triggers even if extra checks are needed\nbefore or after.\nThis will also check if a custom acceptable base fee has been set\nby the vault management for the ",(0,s.jsx)(r.code,{children:"_strategy"}),".\nIn order for the default flow to return true:"]}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"The vault must not be shutdown."}),"\n",(0,s.jsx)(r.li,{children:"The strategy must be active and have debt allocated."}),"\n",(0,s.jsxs)(r.li,{children:["The current network base fee be below the ",(0,s.jsx)(r.code,{children:"acceptableBaseFee"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["The time since the strategies last report be > the vaults ",(0,s.jsx)(r.code,{children:"profitMaxUnlockTime"}),".*"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function defaultVaultReportTrigger(address _vault, address _strategy)\n    public\n    view\n    virtual\n    returns (bool, bytes memory);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_vault"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the vault."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_strategy"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The address of the strategy to report."})]})]})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bool"})}),(0,s.jsx)(r.td,{children:". Bool if the strategy should report to the vault."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bytes"})}),(0,s.jsx)(r.td,{children:". Bytes with either the calldata or reason why False."})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"strategytendtrigger",children:"strategyTendTrigger"}),"\n",(0,s.jsx)(r.p,{children:"Return whether or not a strategy should be tended by a keeper."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"This can be used as an easy keeper integration for any strategy that\nimplements a tendTrigger.\nIt is expected that a strategy implement all needed checks such as\nisShutdown, totalAssets > 0 and base fee checks within the trigger."})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function strategyTendTrigger(address _strategy) external view virtual returns (bool, bytes memory);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_strategy"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"Address of the strategy to check."})]})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bool"})}),(0,s.jsx)(r.td,{children:". Bool if the strategy should be tended."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bytes"})}),(0,s.jsx)(r.td,{children:". Bytes with the calldata."})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"getcurrentbasefee",children:"getCurrentBaseFee"}),"\n",(0,s.jsx)(r.p,{children:"Returns the current base fee from the provider."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"Will return 0 if a base fee provider is not set."})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function getCurrentBaseFee() public view virtual returns (uint256);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:". The current base fee for the chain."})]})})]}),"\n",(0,s.jsx)(r.h3,{id:"iscurrentbasefeeacceptable",children:"isCurrentBaseFeeAcceptable"}),"\n",(0,s.jsxs)(r.p,{children:["Returns wether or not the current base fee is acceptable\nbased on the default ",(0,s.jsx)(r.code,{children:"acceptableBaseFee"}),"."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.em,{children:["Can be used in custom triggers to easily still use this contracts\nfee provider and acceptableBaseFee. And makes it backwards compatible to V2.\nWill always return ",(0,s.jsx)(r.code,{children:"true"})," if no ",(0,s.jsx)(r.code,{children:"baseFeeProvider"})," is set."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function isCurrentBaseFeeAcceptable() external view virtual returns (bool);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Returns"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"<none>"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bool"})}),(0,s.jsx)(r.td,{children:". IF the current base fee is acceptable."})]})})]}),"\n",(0,s.jsx)(r.h3,{id:"setbasefeeprovider",children:"setBaseFeeProvider"}),"\n",(0,s.jsx)(r.p,{children:"Sets the address used to pull the current network base fee."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"Throws if the caller is not current governance."})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function setBaseFeeProvider(address _baseFeeProvider) external virtual onlyGovernance;\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_baseFeeProvider"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"The network's baseFeeProvider address."})]})})]}),"\n",(0,s.jsx)(r.h3,{id:"setacceptablebasefee",children:"setAcceptableBaseFee"}),"\n",(0,s.jsx)(r.p,{children:"Sets the default acceptable current network base fee."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"Throws if the caller is not current governance."})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"function setAcceptableBaseFee(uint256 _newAcceptableBaseFee) external virtual onlyGovernance;\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_newAcceptableBaseFee"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"The acceptable network base fee."})]})})]}),"\n",(0,s.jsx)(r.h2,{id:"events",children:"Events"}),"\n",(0,s.jsx)(r.h3,{id:"newbasefeeprovider",children:"NewBaseFeeProvider"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"event NewBaseFeeProvider(address indexed provider);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"updatedacceptablebasefee",children:"UpdatedAcceptableBaseFee"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"event UpdatedAcceptableBaseFee(uint256 acceptableBaseFee);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"updatedcustomstrategytrigger",children:"UpdatedCustomStrategyTrigger"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"event UpdatedCustomStrategyTrigger(address indexed strategy, address indexed trigger);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"updatedcustomstrategybasefee",children:"UpdatedCustomStrategyBaseFee"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"event UpdatedCustomStrategyBaseFee(address indexed strategy, uint256 acceptableBaseFee);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"updatedcustomvaulttrigger",children:"UpdatedCustomVaultTrigger"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"event UpdatedCustomVaultTrigger(address indexed vault, address indexed strategy, address indexed trigger);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"updatedcustomvaultbasefee",children:"UpdatedCustomVaultBaseFee"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-solidity",children:"event UpdatedCustomVaultBaseFee(address indexed vault, address indexed strategy, uint256 acceptableBaseFee);\n"})})]})}function o(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>l});var s=t(96540);const n={},d=s.createContext(n);function i(e){const r=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),s.createElement(d.Provider,{value:r},e.children)}}}]);
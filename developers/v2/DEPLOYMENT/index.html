<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-developers docs-version-current docs-doc-page docs-doc-id-v2/DEPLOYMENT" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Deploying a Vault and Strategy V2 | Yearn Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://docs.yearn.fi/img/YFILogoGradient.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.yearn.fi/img/YFILogoGradient.jpg"><meta data-rh="true" property="og:url" content="https://docs.yearn.fi/developers/v2/DEPLOYMENT"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="Yearn Finance is a suite of products in Decentralized Finance (DeFi) that provides lending aggregation, yield generation, and insurance on the Ethereum blockchain."><meta data-rh="true" name="git-url" content="https://github.com/yearn/yearn-devdocs"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-developers-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-developers-current"><meta data-rh="true" property="og:title" content="Deploying a Vault and Strategy V2 | Yearn Docs"><meta data-rh="true" name="description" content="Note: This private repo is encouraged to create multiple scripts for governance and dev multisig execution of complex transactions."><meta data-rh="true" property="og:description" content="Note: This private repo is encouraged to create multiple scripts for governance and dev multisig execution of complex transactions."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.yearn.fi/developers/v2/DEPLOYMENT"><link data-rh="true" rel="alternate" href="https://docs.yearn.fi/developers/v2/DEPLOYMENT" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.yearn.fi/developers/v2/DEPLOYMENT" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UNKNOWN-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Yearn Docs" href="/opensearch.xml">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.3b1d09d7.css">
<script src="/assets/js/runtime~main.c3e93063.js" defer="defer"></script>
<script src="/assets/js/main.ecca2096.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="YFI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="YFI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/getting-started/intro">User Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/developers/building-on-yearn">Dev Docs</a><a class="navbar__item navbar__link" href="/contributing/introduction">DAO Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://blog.yearn.fi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://discord.gg/b8ENPNqG5c" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://x.com/yearnfi" target="_blank" rel="noopener noreferrer" class="dropdown__link">Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://t.me/yearnfinance/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Telegram<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://medium.com/iearn" target="_blank" rel="noopener noreferrer" class="dropdown__link">Medium<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://gov.yearn.fi" target="_blank" rel="noopener noreferrer" class="dropdown__link">Governance Forum<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://snapshot.org/#/veyfi.eth" target="_blank" rel="noopener noreferrer" class="dropdown__link">Snapshot Voting<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/yearn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://yearn.fi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-yearn-link" aria-label="yearn.fi"></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/developers/building-on-yearn">Building on Yearn</a><button aria-label="Collapse sidebar category &#x27;Building on Yearn&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/developers/v3/overview">yVaults</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/developers/v3/overview">yVaults v3</a><button aria-label="Expand sidebar category &#x27;yVaults v3&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/developers/v2/getting-started">yVaults v2</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v2/getting-started">Getting Started with Vaults and Strategies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/developers/v2/DEPLOYMENT">Deploying a Vault and Strategy V2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v2/vault-factory">Vault Factory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v2/SPECIFICATION">Yearn System Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v2/OPERATIONS">Operations procedures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v2/additional-resources">Additional Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a href="https://docs.yearn.fi/developers/addresses/v2-contracts" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">v2 Contract Addresses →<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a href="https://docs.yearn.fi/developers/smart-contracts/v2/" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">Smart Contracts →<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/developers/v1/introduction">yVaults v1</a><button aria-label="Expand sidebar category &#x27;yVaults v1&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v2/naming-convention">Naming Conventions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/developers/data-services/yearn-data">Yearn Data Services</a><button aria-label="Expand sidebar category &#x27;Yearn Data Services&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/developers/front-end-development">Front End Development</a><button aria-label="Expand sidebar category &#x27;Front End Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/developers/v2/yswaps">Other Stuff</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 divider"><hr></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/developers/addresses/">Token and Contract Addresses</a><button aria-label="Expand sidebar category &#x27;Token and Contract Addresses&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 divider"><hr></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/developers/smart-contracts/">Smart Contracts</a><button aria-label="Expand sidebar category &#x27;Smart Contracts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 divider"><hr></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/developers/security/">Security</a><button aria-label="Expand sidebar category &#x27;Security&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Deploying a Vault and Strategy V2</h1></header>
<p><strong>Note</strong>: This <a href="https://github.com/yearn/chief-multisig-officer" target="_blank" rel="noopener noreferrer">private repo</a> is encouraged to create multiple scripts for governance and dev multisig execution of complex transactions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2>
<p>Make sure you have the brownie environment set up before trying to deploy a vault. Check out the <a href="https://github.com/yearn/yearn-vaults/blob/master/README.md" target="_blank" rel="noopener noreferrer">Readme MD in Yearn Vaults Repo</a> for instructions.</p>
<p>The below instructions show some python commands that assume you are using the brownie console or a brownie script setup.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-a-new-experimental-vault">Deploying a new Experimental Vault<a href="#deploying-a-new-experimental-vault" class="hash-link" aria-label="Direct link to Deploying a new Experimental Vault" title="Direct link to Deploying a new Experimental Vault">​</a></h2>
<ol>
<li>
<p>Clone the <a href="https://github.com/yearn/yearn-vaults/" target="_blank" rel="noopener noreferrer">Yearn Vaults Repo</a> and run <code>brownie run scripts/deploy.py --network &lt;network-to-deploy-vault&gt;</code></p>
</li>
<li>
<p>Choose the brownie account for deploying your vault. This account needs to have funds to pay for the deployment transaction.</p>
</li>
<li>
<p>Confirm the script is using the latest version of registry <code>v2.registry.ychad.eth</code> against the planned new release vault to be sure it&#x27;s an updated version. (Can validate on Etherscan for latest address)</p>
</li>
<li>
<p>Select the version of the vault to deploy or press enter to use the latest release.</p>
</li>
<li>
<p>Enter <code>Y</code> when prompt to deploy Proxy Vault</p>
</li>
<li>
<p>Enter the checksummed address of the ERC20 token the vault will use.</p>
</li>
<li>
<p>Enter the vault Parameters (Below are some suggested values):</p>
<ul>
<li>Set your address or an address you control as governance.</li>
<li>Set Treasury (<code>treasury.ychad.eth</code>) as the rewards address.</li>
<li>Set Core Dev multisig (<code>dev.ychad.eth</code>) as guardian.</li>
<li>Set Strategist multisig (<code>brain.ychad.eth</code>) as management.</li>
<li>Set name and symbol for vault or use suggested as default (can be changed on-chain later, but please check out our <a href="https://docs.yearn.fi/developers/v2/naming-convention" target="_blank" rel="noopener noreferrer">naming conventions</a>).</li>
</ul>
</li>
<li>
<p>Confirm the Parameters are correct and press <code>y</code> and ENTER to deploy the vault.</p>
</li>
<li>
<p>Check new vault has ABI setup on Etherscan (Some vault versions from older releases may have verification issues with Vyper and proxy detection on Etherscan, consider using later releases &gt;0.3.5 to ensure verification works).</p>
</li>
<li>
<p>Set deposit limit according to the table <a href="#Limits-per-Stage">below</a></p>
</li>
</ol>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vault</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setDepositLimit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">limit</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="11">
<li>Set management fee to 0:</li>
</ol>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vault</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setManagementFee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="12">
<li>(Optional) Set governance to ychad.eth (<code>0xFEB4acf3df3cDEA7399794D0869ef76A6EfAff52</code>) if vault is planned to be endorsed soon:</li>
</ol>
<ul>
<li>Note you can still make changes to the vault after setting governance up until governance is accepted</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vault</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setGovernance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ychad</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eth</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-a-new-strategy">Deploying a new Strategy<a href="#deploying-a-new-strategy" class="hash-link" aria-label="Direct link to Deploying a new Strategy" title="Direct link to Deploying a new Strategy">​</a></h2>
<ol>
<li>Request access to a Core Dev strategist and create a new issue using the <code>Strategy Review</code> template in the strategies <a href="https://github.com/yearn/yearn-strategies/issues" target="_blank" rel="noopener noreferrer">private repo</a> <strong>Complete all the fields</strong>.</li>
<li>If the strategy targets a new protocol/new chain not currently approved by yearn (used in production) it may also require due diligence and path to production plan documents for the strategy to be considered for endorsement.
Example(s) <a href="https://hackmd.io/0w1RZh7DSc27A9EyzlHbJQ?view" target="_blank" rel="noopener noreferrer">SNX</a></li>
<li>Coordinate with Core Dev strategist for reviewing strategy, then follow the status on the <a href="https://github.com/orgs/yearn/projects/5" target="_blank" rel="noopener noreferrer">private board</a>.</li>
<li>Have it peer-reviewed by at least <strong>two</strong> strategists.</li>
<li>Check if <code>want</code> token has a deployed vault already (&gt;=v0.3.0) and coordinate to use that first if possible.</li>
<li>Coordinate with a core developer to set a proper deposit limit and other settings for the new vault. See the table below: <a href="#limits-per-stage">Limits per Stage</a>.</li>
<li>Deploy strategy and upload code to Etherscan for verification.</li>
<li>Tag GitHub review issue with deployed version and attach mainnet address(es) to the strategy item in <a href="https://github.com/orgs/yearn/projects/5" target="_blank" rel="noopener noreferrer">private board</a>.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="make-the-vault-and-strategy-work-together">Make the Vault and Strategy work together<a href="#make-the-vault-and-strategy-work-together" class="hash-link" aria-label="Direct link to Make the Vault and Strategy work together" title="Direct link to Make the Vault and Strategy work together">​</a></h2>
<ol>
<li>
<p>Add strategy to vault (for vault code v0.3.3+):</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic"># Your strategy address</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">debt_ratio </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9800</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic"># 98%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minDebtPerHarvest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic"># Lower limit on debt add</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maxDebtPerHarvest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">256</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Upper limit on debt add</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">performance_fee </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Strategist perf fee: 10%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vault</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addStrategy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  strategy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  debt_ratio</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  minDebtPerHarvest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  maxDebtPerHarvest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  performance_fee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>debt_ratio</code> should be <code>9800</code> if first strategy on vault.</li>
<li><code>rate_limit</code> is <code>0</code> unless there is reason for it to be different.</li>
</ul>
</li>
<li>
<p>Set keeper:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setKeeper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keep3r_manager</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>keep3r_manager</code> = <code>0x736D7e3c5a6CB2CE3B764300140ABF476F6CFCCF</code></li>
</ul>
</li>
<li>
<p>Set health check:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setHealthCheck</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">health_check</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>health_check</code> = <code>0xddcea799ff1699e98edf118e0629a974df7df012</code></li>
</ul>
</li>
</ol>
<p><strong>NOTE</strong>: see section on <a href="#health-checks"> health check </a> for more details.</p>
<ol>
<li>
<p>Set rewards:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setRewards</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">address</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Read <a href="#sharer-contract">below</a> if you want to use the sharer contract.</li>
</ul>
</li>
<li>
<p>Run tests against &quot;live&quot; vault and strategy in mainnet-fork:</p>
<ul>
<li>
<p>Harvest.</p>
</li>
<li>
<p>Profitable harvest.</p>
</li>
<li>
<p>Revoke strategy and check that funds return to the vault.</p>
</li>
<li>
<p>Increase/decrease debt + harvest, and check that the strategy is working well.</p>
</li>
<li>
<p>Migration.</p>
</li>
<li>
<p>Check that tokens in the strategy cannot be sweeped by dust collection.</p>
</li>
<li>
<p><strong>Example</strong>: Hegic strat <a href="https://github.com/Macarse/yhegic/tree/master/tests/development" target="_blank" rel="noopener noreferrer">repo</a>.</p>
</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-harvesting-manually">Test harvesting manually<a href="#test-harvesting-manually" class="hash-link" aria-label="Direct link to Test harvesting manually" title="Direct link to Test harvesting manually">​</a></h2>
<blockquote>
<p>You can coordinate with the strategists if you need a UI to test.</p>
</blockquote>
<ol>
<li>
<p>Deposit some <code>want</code> tokens into the vault.</p>
</li>
<li>
<p>Do first <code>harvest</code> and make sure it worked correctly.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">harvest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Monitor <code>harvest</code> and <code>tend</code> triggers for first few days. Call <code>harvest</code>/<code>tend</code> manually.</p>
</li>
<li>
<p>If this is a new vault deployment, test deposit, withdraw, and transfer to ensure functionality is as expected.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-up--moving-to-endorse">Scaling up / Moving to Endorse<a href="#scaling-up--moving-to-endorse" class="hash-link" aria-label="Direct link to Scaling up / Moving to Endorse" title="Direct link to Scaling up / Moving to Endorse">​</a></h2>
<p>In addition to the two strategist reviews, a Core Developer has to review the strategy before going into production.</p>
<ol>
<li>
<p>Create an <a href="https://github.com/yearn/yearn-finance-v3/issues" target="_blank" rel="noopener noreferrer">issue</a> in yearn&#x27;s web repo to ensure that the new vault won&#x27;t create any problems with the API and that all necessary token/vault metadata is ready. Additionally, if this vault needs to go in the &quot;labs&quot; category, it must be manually added to the website.</p>
</li>
<li>
<p>Increase deposit limit according to the table <a href="#Limits-per-Stage">below</a></p>
</li>
<li>
<p>Set management fee to production level:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vault</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setManagementFee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Set parameters for vault correctly before endorsement:</p>
<ul>
<li>Set Governance to (<code>ychad.eth</code>)</li>
<li>Set Treasury (<code>treasury.ychad.eth</code>) as the rewards address.</li>
<li>Set Core Dev multisig (<code>dev.ychad.eth</code>) as guardian.</li>
<li>Set Strategist multisig (<code>brain.ychad.eth</code>) as management.</li>
<li>Set description and symbol for vault or use suggested as default (can be changed on-chain later)</li>
</ul>
</li>
<li>
<p>Yearn&#x27;s governance now must accept this vault&#x27;s governance and endorse it:</p>
</li>
</ol>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">acceptGovernance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">endorseVault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vault</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="6">
<li>If using a curve voter stategy, make sure to approve the new strategy on yearn&#x27;s voterProxy:</li>
</ol>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">proxy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">approveStrategy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gauge</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> strategy</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="endorsing-a-vault-from-a-previous-release">Endorsing a vault from a previous release<a href="#endorsing-a-vault-from-a-previous-release" class="hash-link" aria-label="Direct link to Endorsing a vault from a previous release" title="Direct link to Endorsing a vault from a previous release">​</a></h3>
<ol>
<li>
<p>Check for the latest release number in the registry contract</p>
</li>
<li>
<p>Check the apiVersion of the vault you want to endorse to identify the target release</p>
</li>
<li>
<p>Calculate the releaseDelta from your target release. (see registry endorseVault param details)
E.g: latestRelease = 0.3.3 and numReleases = 5. New vault apiVersion is 0.3.2
<code>releaseDelta = numReleases - 1 - releaseTarget</code></p>
</li>
<li>
<p>Confirm using <code>registry.releases(uint256)</code> that your <code>targetRelease</code> has the same apiVersion as your vault.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">releaseTarget </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># e.g vault api version 0.3.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">releaseDelta </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">numReleases</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> releaseTarget </span><span class="token comment" style="color:#999988;font-style:italic"># (5-1-3) = 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">acceptGovernance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># from ychad.eth</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">endorseVault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vault</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> releaseDelta</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># from ychad.eth.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="publishing-your-strategy-description">Publishing Your Strategy Description<a href="#publishing-your-strategy-description" class="hash-link" aria-label="Direct link to Publishing Your Strategy Description" title="Direct link to Publishing Your Strategy Description">​</a></h2>
<p>The following steps are required for all strategies. These descriptions are pulled into the v3 website and used to generate strategy diagrams.</p>
<ol>
<li>Create a pull request <a href="https://github.com/yearn/yearn-meta/tree/master/data/strategies" target="_blank" rel="noopener noreferrer">at this link</a> to add a new <code>.json</code> file with your strategy description and details.</li>
<li>Using other strategy files as a reference, create a 1-2 sentence description for your strategy.</li>
<li>The author field is optional.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-keep3r">Setting up Keep3r<a href="#setting-up-keep3r" class="hash-link" aria-label="Direct link to Setting up Keep3r" title="Direct link to Setting up Keep3r">​</a></h2>
<ol>
<li>
<p>Adjust trigger variables until they are correct:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setProfitFactor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setDebtThreshold</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setMaxReportDelay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Set strategy&#x27;s Keep3r role to v2-keeper-contract:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setKeeper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x736D7e3c5a6CB2CE3B764300140ABF476F6CFCCF</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create an add-strategy PR in Keep3r <a href="https://github.com/yearn/yearn-keeper" target="_blank" rel="noopener noreferrer">repo</a> (TBD)</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="limits-per-stage">Limits per Stage<a href="#limits-per-stage" class="hash-link" aria-label="Direct link to Limits per Stage" title="Direct link to Limits per Stage">​</a></h3>
<p>These are the standard deposit limits per stage, and they can be adjusted on a case-by-case basis:</p>
<table><thead><tr><th>Stage</th><th>Limit</th></tr></thead><tbody><tr><td>Experimental</td><td>$500K</td></tr><tr><td>Production</td><td>$10M</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sharer-contract">Sharer contract<a href="#sharer-contract" class="hash-link" aria-label="Direct link to Sharer contract" title="Direct link to Sharer contract">​</a></h3>
<p>&quot;Sharer&quot; is a contract for distributing/splitting strategist rewards. For boarding school graduates suggested split is 34% to strategist multisig and 66% to strategist – <a href="https://github.com/Grandthrax/Sharer" target="_blank" rel="noopener noreferrer">Sharer Contract</a>.</p>
<ul>
<li>Set up rewards for your strategy by calling <code>sharer.addContributors</code>.</li>
<li>Include devs if you forked someone else&#x27;s strategy.</li>
<li>Be sure to reward people who helped you.</li>
<li>You can find the sharer here: <a href="https://etherscan.io/address/0x2c641e14afecb16b4aa6601a40ee60c3cc792f7d" target="_blank" rel="noopener noreferrer">0x2c641e14afecb16b4aa6601a40ee60c3cc792f7d</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="health-checks">Health Checks<a href="#health-checks" class="hash-link" aria-label="Direct link to Health Checks" title="Direct link to Health Checks">​</a></h3>
<p>Since the v0.4.3 release, we have introduced the concept of Health Checks contracts to vaults and strategies. These are helper contracts that can validate the end state of a harvest, or critical transaction, to ensure the accounting stays within established safe parameters.</p>
<p>You can think of these contracts as on-chain unit tests, or &quot;self asserts&quot;, ensuring that the end state of a critical transaction matches an expected condition. The design allows health checks to be configured per individual vault or strategy. If the &quot;assert&quot; doesn&#x27;t match expectations, the entire transaction will revert and require manual intervention by strategists or core devs.</p>
<p>Vaults from release v0.4.3 and onward, support attaching an on-chain health check contract to be called after every harvest report.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="note-on-health-checks-backward-compatibility">Note on Health Checks Backward Compatibility<a href="#note-on-health-checks-backward-compatibility" class="hash-link" aria-label="Direct link to Note on Health Checks Backward Compatibility" title="Direct link to Note on Health Checks Backward Compatibility">​</a></h2>
<p>The health checks are designed to be backward compatible. To target already deployed vaults, we released a patch for each tagged release of <code>BaseStrategy</code>. e.g:</p>
<p>v0.3.5 -&gt; <a href="https://github.com/yearn/yearn-vaults/tree/v0.3.5-1" target="_blank" rel="noopener noreferrer">v0.3.5-1</a> (compatible version)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-health-checks-to-your-strategy">Adding Health Checks to your strategy<a href="#adding-health-checks-to-your-strategy" class="hash-link" aria-label="Direct link to Adding Health Checks to your strategy" title="Direct link to Adding Health Checks to your strategy">​</a></h2>
<ol>
<li>
<p>Before deploying a strategy with <a href="https://github.com/yearn/brownie-strategy-mix" target="_blank" rel="noopener noreferrer">brownie-strategy-mix</a> make sure your <code>brownie-config.yml</code> points to the correct patched vault version, to get a Health Check enabled <code>BaseStrategy</code> imported to your strategy.</p>
</li>
<li>
<p>To interact with the health check contract, no change should be necessary on your extended <code>Strategy</code> logic. <strong>IMPORTANT</strong>: Check your contract size to see if refactoring is needed for compilation.</p>
</li>
<li>
<p>Update your unit tests to set to the common Health Check contract <a href="https://etherscan.io/address/0xddcea799ff1699e98edf118e0629a974df7df012" target="_blank" rel="noopener noreferrer">health.ychad.eth</a></p>
</li>
</ol>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">commonHealthCheck </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Contract</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">web3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ens</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">“health</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ychad</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eth”</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setHealthCheck</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">commonHealthCheck</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Test your normal harvest operations using mainnet-fork and unit tests to validate that the integration is working correctly.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="health-check-operations">Health Check Operations<a href="#health-check-operations" class="hash-link" aria-label="Direct link to Health Check Operations" title="Direct link to Health Check Operations">​</a></h2>
<p>A global setting check against deviations in reported profit and losses within a safe interval. Any report/harvest that falls outside this global safe interval will report.</p>
<p>If a harvest/report revert transaction is detected on-chain, manual intervention is required to debug and accept the transaction into the vaults accounting. This should be done after proper validation by the strategist&#x27;s multi-sig and Core Devs group.</p>
<p>Disabling health checks is meant to be a one-time special event using the following steps:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># disables next health check on harvest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setDoHealthCheck</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> account</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> brain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ychad</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eth </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># do harvest with profit/loss deviation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">harvest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After this manual harvest, the health check will be automatically enabled back for further harvests.</p>
<p><strong>NOT RECOMMENDED</strong>: Health checks can be disabled permanently by setting the health check contract to address <code>0x0</code> in the Strategy Contract. This should be done only in extreme circumstances and if you know what you are doing.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-health-checks">Customizing Health Checks<a href="#customizing-health-checks" class="hash-link" aria-label="Direct link to Customizing Health Checks" title="Direct link to Customizing Health Checks">​</a></h2>
<p>The Common Health Check Contract <code>health.ychad.eth</code> uses a global default setting for profit and loss.</p>
<p>It also supports setting specific profit/loss limit checks per strategy via the following operation:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># strategy address</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">profitLimit </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># in bps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lossLimit </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># in bps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">healthcheck</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setStrategyLimits</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> profitLimit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lossLimit</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Finally, if needed, a custom Health Check contract can be deployed and attached to the standard Health Check contract, which works as a registry. You can attach a custom Health Check to a strategy using the following operation:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># strategy address</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">customHealthCheck </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># custom health check address</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">healthcheck</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setCheck</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> customHealthCheck</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Custom Health Check <strong>must</strong> follow the interface for <a href="https://github.com/yearn/yearn-vaults/blob/3bea2d8c070efeb05bc02d7d0136120bc516af4b/contracts/CommonHealthCheck.sol#L5" target="_blank" rel="noopener noreferrer">custom health checks</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ethereum-addresses">Ethereum Addresses<a href="#ethereum-addresses" class="hash-link" aria-label="Direct link to Ethereum Addresses" title="Direct link to Ethereum Addresses">​</a></h3>
<table><thead><tr><th>Identity</th><th>ENS</th><th>Address</th></tr></thead><tbody><tr><td>V2 Registry</td><td>v2.registry.ychad.eth</td><td><a href="https://etherscan.io/address/0x50c1a2eA0a861A967D9d0FFE2AE4012c2E053804" target="_blank" rel="noopener noreferrer">0x50c1a2eA0a861A967D9d0FFE2AE4012c2E053804</a></td></tr><tr><td>Yearn multisig (daddy)</td><td>ychad.eth</td><td><a href="https://etherscan.io/address/0xFEB4acf3df3cDEA7399794D0869ef76A6EfAff52" target="_blank" rel="noopener noreferrer">0xFEB4acf3df3cDEA7399794D0869ef76A6EfAff52</a></td></tr><tr><td>Strategist multisig</td><td>brain.ychad.eth</td><td><a href="https://etherscan.io/address/0x16388463d60FFE0661Cf7F1f31a7D658aC790ff7" target="_blank" rel="noopener noreferrer">0x16388463d60FFE0661Cf7F1f31a7D658aC790ff7</a></td></tr><tr><td>Core Dev multisig</td><td>dev.ychad.eth</td><td><a href="https://etherscan.io/address/0x846e211e8ba920B353FB717631C015cf04061Cc9" target="_blank" rel="noopener noreferrer">0x846e211e8ba920B353FB717631C015cf04061Cc9</a></td></tr><tr><td>Treasury</td><td>treasury.ychad.eth</td><td><a href="https://etherscan.io/address/0x93A62dA5a14C80f265DAbC077fCEE437B1a0Efde" target="_blank" rel="noopener noreferrer">0x93A62dA5a14C80f265DAbC077fCEE437B1a0Efde</a></td></tr><tr><td>Health Check</td><td>health.ychad.eth</td><td><a href="https://etherscan.io/address/0xDDCea799fF1699e98EDF118e0629A974Df7DF012" target="_blank" rel="noopener noreferrer">0xDDCea799fF1699e98EDF118e0629A974Df7DF012</a></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fantom-addresses">Fantom Addresses<a href="#fantom-addresses" class="hash-link" aria-label="Direct link to Fantom Addresses" title="Direct link to Fantom Addresses">​</a></h3>
<table><thead><tr><th>Identity</th><th>Address</th></tr></thead><tbody><tr><td>Registry</td><td><a href="https://ftmscan.com/address/0x727fe1759430df13655ddb0731dE0D0FDE929b04" target="_blank" rel="noopener noreferrer">0x727fe1759430df13655ddb0731dE0D0FDE929b04</a></td></tr><tr><td>Strategist multisig</td><td><a href="https://ftmscan.com/address/0x72a34AbafAB09b15E7191822A679f28E067C4a16" target="_blank" rel="noopener noreferrer">0x72a34AbafAB09b15E7191822A679f28E067C4a16</a></td></tr><tr><td>Governance multisig</td><td><a href="https://ftmscan.com/address/0xC0E2830724C946a6748dDFE09753613cd38f6767" target="_blank" rel="noopener noreferrer">0xC0E2830724C946a6748dDFE09753613cd38f6767</a></td></tr><tr><td>Treasury</td><td><a href="https://ftmscan.com/address/0x89716ad7edc3be3b35695789c475f3e7a3deb12a" target="_blank" rel="noopener noreferrer">0x89716ad7edc3be3b35695789c475f3e7a3deb12a</a></td></tr><tr><td>Health Check</td><td><a href="https://ftmscan.com/address/0xf13Cd6887C62B5beC145e30c38c4938c5E627fe0" target="_blank" rel="noopener noreferrer">0xf13Cd6887C62B5beC145e30c38c4938c5E627fe0</a></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arbitrum-addresses">Arbitrum Addresses<a href="#arbitrum-addresses" class="hash-link" aria-label="Direct link to Arbitrum Addresses" title="Direct link to Arbitrum Addresses">​</a></h3>
<table><thead><tr><th>Identity</th><th>Address</th></tr></thead><tbody><tr><td>Registry</td><td><a href="https://arbiscan.io/address/0x3199437193625DCcD6F9C9e98BDf93582200Eb1f" target="_blank" rel="noopener noreferrer">0x3199437193625DCcD6F9C9e98BDf93582200Eb1f</a></td></tr><tr><td>Strategist multisig</td><td><a href="https://arbiscan.io/address/0x6346282DB8323A54E840c6C772B4399C9c655C0d" target="_blank" rel="noopener noreferrer">0x6346282DB8323A54E840c6C772B4399C9c655C0d</a></td></tr><tr><td>Governance multisig</td><td><a href="https://arbiscan.io/address/0xb6bc033D34733329971B938fEf32faD7e98E56aD" target="_blank" rel="noopener noreferrer">0xb6bc033D34733329971B938fEf32faD7e98E56aD</a></td></tr><tr><td>Treasury</td><td><a href="https://arbiscan.io/address/0x1DEb47dCC9a35AD454Bf7f0fCDb03c09792C08c1" target="_blank" rel="noopener noreferrer">0x1DEb47dCC9a35AD454Bf7f0fCDb03c09792C08c1</a></td></tr><tr><td>Health Check</td><td><a href="https://arbiscan.io/address/0x32059ccE723b4DD15dD5cb2a5187f814e6c470bC" target="_blank" rel="noopener noreferrer">0x32059ccE723b4DD15dD5cb2a5187f814e6c470bC</a></td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-09-04T22:15:08.000Z" itemprop="dateModified">Sep 4, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/developers/v2/getting-started"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting Started with Vaults and Strategies</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/developers/v2/vault-factory"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Vault Factory</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#deploying-a-new-experimental-vault" class="table-of-contents__link toc-highlight">Deploying a new Experimental Vault</a></li><li><a href="#deploying-a-new-strategy" class="table-of-contents__link toc-highlight">Deploying a new Strategy</a></li><li><a href="#make-the-vault-and-strategy-work-together" class="table-of-contents__link toc-highlight">Make the Vault and Strategy work together</a></li><li><a href="#test-harvesting-manually" class="table-of-contents__link toc-highlight">Test harvesting manually</a></li><li><a href="#scaling-up--moving-to-endorse" class="table-of-contents__link toc-highlight">Scaling up / Moving to Endorse</a><ul><li><a href="#endorsing-a-vault-from-a-previous-release" class="table-of-contents__link toc-highlight">Endorsing a vault from a previous release</a></li></ul></li><li><a href="#publishing-your-strategy-description" class="table-of-contents__link toc-highlight">Publishing Your Strategy Description</a></li><li><a href="#setting-up-keep3r" class="table-of-contents__link toc-highlight">Setting up Keep3r</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a><ul><li><a href="#limits-per-stage" class="table-of-contents__link toc-highlight">Limits per Stage</a></li><li><a href="#sharer-contract" class="table-of-contents__link toc-highlight">Sharer contract</a></li><li><a href="#health-checks" class="table-of-contents__link toc-highlight">Health Checks</a></li></ul></li><li><a href="#note-on-health-checks-backward-compatibility" class="table-of-contents__link toc-highlight">Note on Health Checks Backward Compatibility</a></li><li><a href="#adding-health-checks-to-your-strategy" class="table-of-contents__link toc-highlight">Adding Health Checks to your strategy</a></li><li><a href="#health-check-operations" class="table-of-contents__link toc-highlight">Health Check Operations</a></li><li><a href="#customizing-health-checks" class="table-of-contents__link toc-highlight">Customizing Health Checks</a><ul><li><a href="#ethereum-addresses" class="table-of-contents__link toc-highlight">Ethereum Addresses</a></li><li><a href="#fantom-addresses" class="table-of-contents__link toc-highlight">Fantom Addresses</a></li><li><a href="#arbitrum-addresses" class="table-of-contents__link toc-highlight">Arbitrum Addresses</a></li></ul></li></ul></div></div></div></div></main></div></div></div> </div>
</body>
</html>
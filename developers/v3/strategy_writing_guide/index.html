<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-developers docs-version-current docs-doc-page docs-doc-id-v3/strategy_writing_guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Guide to creating V3 &quot;Tokenized Strategies&quot; | yearn.fi</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://docs.yearn.fi/img/YFILogoGradient.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.yearn.fi/img/YFILogoGradient.jpg"><meta data-rh="true" property="og:url" content="https://docs.yearn.fi/developers/v3/strategy_writing_guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="Yearn Finance is a suite of products in Decentralized Finance (DeFi) that provides lending aggregation, yield generation, and insurance on the Ethereum blockchain."><meta data-rh="true" name="git-url" content="https://github.com/yearn/yearn-devdocs"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-developers-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-developers-current"><meta data-rh="true" property="og:title" content="Guide to creating V3 &quot;Tokenized Strategies&quot; | yearn.fi"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.yearn.fi/developers/v3/strategy_writing_guide"><link data-rh="true" rel="alternate" href="https://docs.yearn.fi/developers/v3/strategy_writing_guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.yearn.fi/developers/v3/strategy_writing_guide" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UNKNOWN-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="yearn.fi" href="/opensearch.xml">






<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.5e2dc9a6.css">
<script src="/assets/js/runtime~main.d3b0d42f.js" defer="defer"></script>
<script src="/assets/js/main.3e43cee4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="YFI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="YFI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Yearn Finance</b></a><a class="navbar__item navbar__link" href="/getting-started/intro">Introduction</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/developers/v3/overview">Develop</a><a class="navbar__item navbar__link" href="/contributing/contribute">Contribute</a><a class="navbar__item navbar__link" href="/resources/faq">Resources</a><a class="navbar__item navbar__link" href="/security/">Security</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.svg" alt="YFI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="YFI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>Yearn Finance</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/developers/v3/overview">yVaults Version 3</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v3/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v3/Integrating_v3">Integrating V3 Vaults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/developers/v3/strategy_writing_guide">Guide to creating V3 &quot;Tokenized Strategies&quot;</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v3/vault_management">Deploying and Managing a V3 Vault</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v3/periphery">Periphery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developers/v3/protocol_fees">Protocol Fees</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/developers/v2/getting-started">yVaults Version 2</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 divider"><hr></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/developers/smart-contracts/">Smart Contracts</a><button aria-label="Expand sidebar category &#x27;Smart Contracts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Guide to creating V3 &quot;Tokenized Strategies&quot;</h1>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="overview">Overview<a class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" href="/developers/v3/strategy_writing_guide#overview">​</a></h2>
<p>So you wanna be a Yearn strategist?</p>
<p>Can you write 3 lines of code?</p>
<p>Well, then you came to the right place.</p>
<p>The strategy creation process has been very simplified in V3, so it is technically possible to write a Tokenized Strategy with only 3 lines of code. However, most strategies will need more than that. This will guide you through the entire strategy development process from getting your local repo set up through deployment and automation to cashing out those sweet sweet strategist fees.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduction">Introduction<a class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" href="/developers/v3/strategy_writing_guide#introduction">​</a></h2>
<p>A strategy&#x27;s job is to hold the logic responsible for generating yield on some underlying asset. It should hold the code to integrate with an external protocol and do any needed asset deployment, withdraw logic, reward selling, reinvesting LTV maintenance etc. to generate the most possible yield from that particular source most efficiently.</p>
<p>The most significant update to Yearn V3 from V2 was the introduction of &quot;Tokenized Strategies&quot;. In V2 strategies were stand-alone contracts that were attached to one specific vault. That vault was the only one who could ever deposit or withdraw funds from the strategy and each had a trusted relationship with the other.</p>
<p>In V3 strategies are now fully ERC-4626-compliant stand-alone vaults. Though their job remains the same (i.e., generate yield from one external source), strategies can now be connected to many different vaults simultaneously and deposited directly into by an end user.</p>
<p>This increased functionality not only means strategies have a much larger potential market of depositors but also means anyone (including you) now can build, deploy, market, and maintain your own Yearn strategy without any need for an endorsement or permission from Yearn.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="why">Why?<a class="hash-link" aria-label="Direct link to Why?" title="Direct link to Why?" href="/developers/v3/strategy_writing_guide#why">​</a></h2>
<ul>
<li><em>Strategist Fees!</em> - V3 brings back the ability for developers of strategies to earn the fees generated from their strategy. Meaning your earning potential is unlimited.</li>
<li><em>Codify Your Yield Farming</em> - Tokenized strategies make it easy for anyone to codify their yield-generating strategies. Wanna keep your alpha private? No problem they come fully customizable to allow for you to be the only one allowed to deposit.</li>
<li><em>Simple 4626 Wrappers</em> - Tokenized Strategies make a super easy and cheap way to give any previously deployed protocol an ERC-4626 interface. This opens up any protocol to easily integrate into the rapidly growing 4626 ecosystem (including Yearn Allocator vaults).</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="definitions">Definitions<a class="hash-link" aria-label="Direct link to Definitions" title="Direct link to Definitions" href="/developers/v3/strategy_writing_guide#definitions">​</a></h2>
<ul>
<li><a href="https://github.com/yearn/tokenized-strategy" target="_blank" rel="noopener noreferrer">Strategy</a> : A strategy or &quot;Tokenized Strategy&quot; in V3 refers to an ERC-4626 compliant contract that utilizes the <a href="https://github.com/yearn/tokenized-strategy/blob/master/src/TokenizedStrategy.sol" target="_blank" rel="noopener noreferrer">TokenizedStrategy</a> pattern that either allocator vaults or individual users can deposit directly into and receive shares in return. The strategy takes the underlying asset and deploys it in a single source in order to generate yield on that asset.</li>
<li>Vault: Or &quot;Allocator Vault&quot; is a Yearn ERC4626 compliant Smart contract that receives assets from Depositors to distribute among the different Strategies added to the vault, managing accounting and asset distribution.</li>
<li>Asset: Any ERC20-compliant token</li>
<li>Shares: ERC20-compliant token that tracks the asset balance in the strategy for every depositor.</li>
<li><a href="https://github.com/yearn/tokenized-strategy/blob/master/src/TokenizedStrategy.sol" target="_blank" rel="noopener noreferrer">TokenizedStrategy.sol</a>: The implementation contract that all strategies delegateCall to for the standard ERC4626 and profit locking functions.</li>
<li><a href="https://github.com/yearn/tokenized-strategy/blob/master/src/BaseStrategy.sol" target="_blank" rel="noopener noreferrer">BaseStrategy.sol</a>: The abstract contract that a strategy should inherit from that handles all communication with the Tokenized Strategy contract.</li>
<li>Strategist: The developer of a specific strategy.</li>
<li>Depositor: Account that deposits the asset and holds Shares</li>
<li>Management: The owner of the specific strategy that can set fees, profit unlocking time etc.</li>
<li>Emergency Admin: Address that can call emergency functions on the strategy.</li>
<li>Keeper: the address of a contract allowed to call report() and tend() on a strategy.</li>
<li>Factory: The factory that all Allocator Vaults of a specific API version are cloned from that also controls the protocol fee amount and recipient for a strategy.</li>
<li>Performance Fee: The fee strategies charge during reports based on the yield earned since the last report.</li>
<li>Performance Fee recipient: The address that receives the shares charged as performance fees.</li>
<li>Protocol Fee: A fee on the fees charged by strategist sent to the Yearn Treasury.</li>
<li>Profit Max Unlock Time: Time in seconds over which reported profits will unlock over.</li>
<li><code>report</code>: Called by management or keepers to accrue all profits or losses, charge fees, and lock profit to be distributed.</li>
<li><code>tend</code>: Called by management or keepers between reports for any maintenance that should happen that doesn&#x27;t require a full report.</li>
<li>API Version: The version that a specific Strategy is using for its logic.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="architecture">Architecture<a class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture" href="/developers/v3/strategy_writing_guide#architecture">​</a></h2>
<p>While the complete architecture of the Tokenized Strategy is out of the scope of this document you can read more about how it works <a href="https://github.com/yearn/tokenized-strategy/blob/master/SPECIFICATION.md" target="_blank" rel="noopener noreferrer">here</a></p>
<p><strong>TLDR</strong>: V3 strategies use an immutable proxy pattern to outsource all of its complex, high risk, and redundant code to one <a href="https://github.com/yearn/tokenized-strategy/blob/master/src/TokenizedStrategy.sol" target="_blank" rel="noopener noreferrer">TokenizedStrategy.sol</a> implementation contract that is used by every strategy of a specific API version. To use this pattern you simply need to inherit the <a href="https://github.com/yearn/tokenized-strategy/blob/master/src/BaseStrategy.sol" target="_blank" rel="noopener noreferrer">BaseStrategy.sol</a> contract, that holds all of the logic to communicate with the implementation contract, and then just override a few simple functions with your specific strategy logic.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getting-started">Getting started<a class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started" href="/developers/v3/strategy_writing_guide#getting-started">​</a></h2>
<p>Yearn has base templates made to build off of built-in both <a href="https://www.apeworx.io/" target="_blank" rel="noopener noreferrer">Ape Worx</a>, a python-based development toolkit, and <a href="https://book.getfoundry.sh/" target="_blank" rel="noopener noreferrer">Foundry</a>.</p>
<ol>
<li>
<p>Choose your development framework.</p>
<ul>
<li><a href="https://github.com/yearn/tokenized-strategy-foundry-mix" target="_blank" rel="noopener noreferrer">Tokenized Strategy Foundry Mix</a></li>
<li><a href="https://github.com/yearn/tokenized-strategy-ape-mix" target="_blank" rel="noopener noreferrer">Tokenized Strategy Ape Mix</a></li>
</ul>
</li>
<li>
<p>Set up the local environment with the selected mix. Each mix has detailed instructions in the &quot;How To Start&quot; section of the README, of specific requirements, cloning instructions, and needed environment variables.</p>
</li>
<li>
<p>Assure tests pass. Each mix comes with a small set of pre-written tests, to serve as examples and can be used to ensure your local repository is set up correctly before adding your logic.</p>
</li>
</ol>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="strategy-writing">Strategy Writing<a class="hash-link" aria-label="Direct link to Strategy Writing" title="Direct link to Strategy Writing" href="/developers/v3/strategy_writing_guide#strategy-writing">​</a></h2>
<p>So you have your idea and local environment setup. Now its time to start writing your actual strategy.</p>
<p>To create your Tokenized Strategy, you must override at least three functions outlined in the <code>Strategy.sol</code>.</p>
<hr>
<p>The only default global variables from the BaseStrategy that can be accessed from storage is <code>asset</code> and <code>TokenizedStrategy</code>.</p>
<p>If other global variables are needed for your specific strategy, you can use the <code>TokenizedStrategy</code> variable to quickly retrieve any other needed variables, such as <code>totalAssets</code>, <code>isShutdown</code> etc.</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">TokenizedStrategy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">isShutdown</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;strategy is shutdown&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="_deployfundsuint256_amount"><em>_deployFunds(uint256_amount)</em><a class="hash-link" aria-label="Direct link to _deployfundsuint256_amount" title="Direct link to _deployfundsuint256_amount" href="/developers/v3/strategy_writing_guide#_deployfundsuint256_amount">​</a></h3>
<p><strong>Purpose</strong>:</p>
<ul>
<li>This function is called during every deposit into your strategy to allow it to deploy the underlying asset deposited into the yield source.</li>
</ul>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>_amount</code>: The total amount of underlying assets currently available for deployment, including the amount deposited and previously idle funds.</li>
</ul>
<p><strong>Returns</strong>: NONE.</p>
<p><strong>Good to Know</strong>:</p>
<ul>
<li>This function is permissionless, so swaps or LP movements can be sandwiched or manipulated.</li>
<li>This does not need to deploy the full <code>_amount</code> if the strategy doesn&#x27;t want to.</li>
</ul>
<p><strong>Best Practice</strong>:</p>
<ul>
<li>Override <code>availableDepositLimit</code> with any needed checks like protocol deposit limits or current status. This will alleviate the need to check any of these things during <code>_deployFunds</code> since <code>availableDepositLimit</code> is called during every deposit to check for restrictions.</li>
</ul>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">_deployFunds() Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_deployFunds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">uint256</span><span class="token plain"> _amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">internal</span><span class="token plain"> override \</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    yieldSource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">deposit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">asset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> _amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="_freefundsuint256_amount"><em>_freeFunds(uint256_amount)</em><a class="hash-link" aria-label="Direct link to _freefundsuint256_amount" title="Direct link to _freefundsuint256_amount" href="/developers/v3/strategy_writing_guide#_freefundsuint256_amount">​</a></h3>
<p><strong>Purpose</strong>:</p>
<ul>
<li>This function is called during withdraws from your strategy if there is not sufficient idle asset to service the full withdrawal.</li>
</ul>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>_amount</code>: The amount of the underlying asset that needs to be pulled from the yield source.</li>
</ul>
<p><strong>Returns</strong>: NONE.</p>
<p><strong>Good to Know</strong>:</p>
<ul>
<li><strong>The amount of loose assets has already been accounted for</strong>.</li>
<li>This function is also entirely permissionless, so swaps or lp values can be sandwiched or otherwise manipulated.</li>
<li>Users have the ability to specify their own <code>maxLoss</code> on withdraws.</li>
</ul>
<p><strong>Best Practice</strong>:</p>
<ul>
<li>Use the <code>_amount</code> parameter passed in rather than relying on .balanceOf(address(this) since idle has already been accounted for.</li>
<li><strong>Any difference between the <code>_amount</code> parameter and the actual amount withdrawn will count as a loss and be passed on to the withdrawer.</strong></li>
<li>If your strategy is illiquid or can not always service full withdraws, you can limit the amount by overriding <code>availableWithdrawLimit</code> outlined below.</li>
</ul>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">_freeFunds() Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_freeFunds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">uint256_amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">internal</span><span class="token plain"> override </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    yieldSource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">withdraw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">asset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> _amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="_harvestandreport"><em>_harvestAndReport()</em><a class="hash-link" aria-label="Direct link to _harvestandreport" title="Direct link to _harvestandreport" href="/developers/v3/strategy_writing_guide#_harvestandreport">​</a></h3>
<p><strong>Purpose</strong>:</p>
<ul>
<li>Called during every report. This should harvest and sell any rewards, reinvest any proceeds, perform any position maintenance and return a full accounting of a trusted amount denominated in the underlying asset the strategy holds.</li>
</ul>
<p><strong>Parameters</strong>: NONE</p>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>_totalAssets</code>:  A trusted and accurate account for the total amount of &#x27;asset&#x27; the strategy currently holds including loose funds.</li>
</ul>
<p><strong>Good to Know</strong>:</p>
<ul>
<li>This can only be called by a permissioned address so if set up correctly, it can be trusted to perform swaps, LP movements etc.</li>
<li>This should account for both deployed and idle assets.</li>
</ul>
<p><strong>Best Practice</strong>:</p>
<ul>
<li>The returned value is used to account for all strategy profits, losses and fees so care should be taken when relying on oracle values, LP prices etc. that have the potential to be manipulated.</li>
<li>This can still be called after a strategy has been shut down so you may want to check if the strategy is shut down before performing certain functions like re-deploying loose funds.</li>
</ul>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">_harvestAndReport() Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_harvestAndReport</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">internal</span><span class="token plain"> override </span><span class="token keyword" style="font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">uint256</span><span class="token plain"> _totalAssets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Only harvest and redeploy if the strategy is not shutdown.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">TokenizedStrategy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">isShutdown</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Claim all rewards and sell to asset.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">_claimAndSellRewards</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Check how much we can re-deploy into the yield source.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token builtin" style="color:rgb(130, 170, 255)">uint256</span><span class="token plain"> toDeploy </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Math</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">min</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            asset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">balanceOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">availableDepositLimit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// If greater than 0.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">toDeploy </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Deposit the sold amount back into the yield source.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">_deployFunds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">toDeploy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Return full balance no matter what.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    _totalAssets </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> yieldSource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">balanceOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> asset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">balanceOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="optional-functions">Optional Functions<a class="hash-link" aria-label="Direct link to Optional Functions" title="Direct link to Optional Functions" href="/developers/v3/strategy_writing_guide#optional-functions">​</a></h3>
<p>Simply overriding those three functions will make your strategy a fully functional, permissionless, 4626-compliant stand-alone vault. It can work independently or seamlessly into any Yearn V3 vault.</p>
<p>While that may be all that&#x27;s necessary for some of the most straightforward strategies, most strategists may want to add more customization or complexity to their strategy. There are five more optional functions that can be overridden by a strategist if desired to continue to build out their Tokenized Strategy.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="availabledepositlimitaddress-_owner"><em>availableDepositLimit(address _owner)</em><a class="hash-link" aria-label="Direct link to availabledepositlimitaddress-_owner" title="Direct link to availabledepositlimitaddress-_owner" href="/developers/v3/strategy_writing_guide#availabledepositlimitaddress-_owner">​</a></h3>
<p><strong>Purpose</strong>:</p>
<ul>
<li>This is called during any deposits and can be used to enforce any deposit limit or white list that the strategist desires or that the underlying protocol uses.</li>
</ul>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>_owner</code>: The address receiving the shares minted during the deposit.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li>The limit if any that should be enforced on the deposit.</li>
</ul>
<p><strong>Good to Know</strong>:</p>
<ul>
<li>This will default to return uint256 max.</li>
<li>This does not need to consider any conversion rates from assets to shares. But you should know that any limit under uint256 max may get converted to shares and should not be high enough to overflow  on multiplication.</li>
</ul>
<p><strong>Best Practices</strong>:</p>
<ul>
<li>Check all values for the protocol you are integrating with that may cause deposits to revert.</li>
<li>Make sure to implement setter functions for any deposit limit or whitelist that are enforced.</li>
</ul>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">availableDepositLimit() Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">availableDepositLimit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token plain"> _owner</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">view</span><span class="token plain"> override </span><span class="token keyword" style="font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">uint256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">yieldSource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">isPaused</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin" style="color:rgb(130, 170, 255)">uint256</span><span class="token plain"> totalAssets </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> TokenizedStrategy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">totalAssets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> totalAssets </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;=</span><span class="token plain"> depositLimit </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> depositLimit </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> totalAssets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>
<p><em>availableWithdrawLimit(address _owner)</em></p>
<p><strong>Purpose</strong>:</p>
<ul>
<li>This is called during every withdraw and can be used to enforce any withdraw limit the strategist desires.</li>
</ul>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>_owner</code>: The address that owns the shares that would be burnt for the underlying assets.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li>The limit if any that should be enforced on withdraws.</li>
</ul>
<p><strong>Good to Know</strong>:</p>
<ul>
<li>This does not need to consider the balance of the _owner.</li>
<li>This can be more than the actual amount available to withdraw.</li>
<li><strong>Recommended use is to have the amount returned not be close to the actual strategies totalAssets to avoid rounding issues.</strong></li>
<li>Defaults to max uint256.</li>
</ul>
<p><strong>Best Practices</strong>:</p>
<ul>
<li>This should be overridden for strategies that have illiquid, or sandwichable positions to prevent reporting incorrect losses on withdraws.</li>
<li>This should also account for any restrictions the underlying protocol may encounter.</li>
<li>To just allow the idle funds to be withdrawn use <code>asset.balanceOf(address(this))</code>.</li>
<li>This does not need to consider conversion rates from assets to shares. But you should know that any limit under uint256 max may get converted to shares and should not be high enough to overflow  on multiplication.</li>
</ul>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">availableWithdrawLimit() Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">availableWithdrawLimit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token plain"> _owner</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">view</span><span class="token plain"> override </span><span class="token keyword" style="font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">uint256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">positionIsLocked </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> yieldSource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">isPaused</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> asset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">balanceOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Return both the loose balance and the current liqudity of the yield source.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> asset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">balanceOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> asset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">balanceOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">yieldSource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><em>_tend(uint256 _totalIdle)</em></p>
<p><strong>Purpose</strong>:</p>
<ul>
<li>This would get called during a <code>tend</code> call and can be used if a strategy needs to perform any maintenance or other actions that don&#x27;t require a full report. If used the strategy should also implement a <code>_tendTrigger</code> that keepers can monitor to know when it should be called.</li>
</ul>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>_totalIdle</code>: The amount of asset currently loose in the strategy.</li>
</ul>
<p><strong>Returns</strong>: NONE</p>
<p><strong>Good to Know</strong>:</p>
<ul>
<li>The strategies <code>totalAssets</code> will be the exact before and after a tend as not to have any effect on PPS.</li>
</ul>
<p><strong>Best Practices</strong>:</p>
<ul>
<li>This can only be called by the keeper or management so it should be from a trusted source.</li>
<li>Can be used to perform LTV adjustments on leveraged strategies.</li>
<li>Can be used to know a trusted relay has been used to deposit idle funds for a strategy that doesn&#x27;t deploy funds during deposits.</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">_tend() Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_tend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">uint256</span><span class="token plain"> _totalIdle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">internal</span><span class="token plain"> override </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">currentLTV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">targetLTV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">_leverUp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">_totalIdle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">currentLTV </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">warningLTV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">_leverDown</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">_totalIdle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><em>_tendTrigger()</em></p>
<p><strong>Purpose</strong>:</p>
<ul>
<li>Should return whether or not a keeper should call <code>tend</code> on the strategy. This should be implemented if tend is needed to be used.</li>
</ul>
<p><strong>Parameters</strong>: NONE.</p>
<p><strong>Returns</strong>:</p>
<ul>
<li>Boolean representing if a keeper should call <code>tend</code>.</li>
</ul>
<p><strong>Good to Know</strong>:</p>
<ul>
<li>Default return value is false.</li>
</ul>
<p><strong>Best Practices</strong>:</p>
<ul>
<li>Can implement checks on the current base fee of the chain to ensure the gas cost isn&#x27;t too high.</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">_tendTrigger() Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_tendTrigger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">view</span><span class="token plain"> override </span><span class="token keyword" style="font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">bool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">currentLTV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">warningLTV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">currentLTV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">lowerBoundLTV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">isBaseFeeAcceptable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><em>_emergencyWithdraw(uint256 _amount)</em>
<strong>Purpose</strong>:</p>
<ul>
<li>Allows management to manually pull funds from the yield source once a strategy has been shut down.</li>
</ul>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>_amount</code>: The specific amount to pull from the yield source</li>
</ul>
<p><strong>Returns</strong>: NONE.</p>
<p><strong>Good to Know</strong>:</p>
<ul>
<li>This can only be called once a strategy is shut down.</li>
<li>The <code>_amount</code> can be more than is available to pull.</li>
<li>The totalAssets will be the same before and after this call.</li>
</ul>
<p><strong>Best Practices</strong>:</p>
<ul>
<li>Keep the withdrawal logic as simple as possible.</li>
<li>Check <code>_amount</code> against the available amount to withdraw.</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">_emergencyWithdraw() Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_emergencyWithdraw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">uint256</span><span class="token plain"> _amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">internal</span><span class="token plain"> override </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    _amount </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">min</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">_amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> yieldSource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">balanceOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">_freeFunds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">_amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<hr>
<p>All other functionality, such as reward selling, upgradability, etc., is up to the strategist to determine what best fits their vision. Due to the ability of strategies to stand alone from a Vault, it is expected and encouraged for strategists to experiment with more complex, risky, or previously unfeasible Strategies.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fyi">FYI<a class="hash-link" aria-label="Direct link to FYI" title="Direct link to FYI" href="/developers/v3/strategy_writing_guide#fyi">​</a></h3>
<p>The Tokenized Strategy contract manually track totalAssets. Meaning the only way to update the totalAssets for either profits or losses is through a <code>report</code> call.</p>
<p><strong>NOTE</strong>: Writing to a strategy&#x27;s default global storage state internally post-deployment is impossible. You must make external calls from the <code>management</code> address to configure any desired variables.</p>
<p>To include extra permissioned functions such as setters, there are modifiers for <code>onlyManagement</code>, <code>onlyKeepers</code> and <code>onlyEmergencyAuthorized</code> available by default.</p>
<p>The symbol used for each tokenized Strategy is set automatically with a standardized approach based on the <code>asset</code>&#x27;s symbol. Strategists should use the <code>name</code> parameter in the constructor for a unique and descriptive name that encapsulates their specific Strategy.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="periphery">Periphery<a class="hash-link" aria-label="Direct link to Periphery" title="Direct link to Periphery" href="/developers/v3/strategy_writing_guide#periphery">​</a></h2>
<p>To make Strategy writing as simple as possible, a suite of optional &#x27;Periphery&#x27; helper contracts can be inherited by your Strategy to provide standardized and tested functionality for things like swaps. A complete list of the periphery contracts can be viewed <a href="https://github.com/yearn/tokenized-strategy-periphery/tree/master/src" target="_blank" rel="noopener noreferrer">here</a></p>
<p>*All periphery contracts are optional; strategists can choose if they wish to use them.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="swappers"><a href="https://github.com/yearn/tokenized-strategy-periphery/tree/master/src/swappers" target="_blank" rel="noopener noreferrer">Swappers</a><a class="hash-link" aria-label="Direct link to swappers" title="Direct link to swappers" href="/developers/v3/strategy_writing_guide#swappers">​</a></h3>
<p>To make reward swapping as easy and standardized as possible, multiple swapper contracts can be inherited by a strategy to inherit pre-built and tested logic for whichever method of reward swapping is desired. This allows a strategist only to need to set a few global variables and then simply use the default syntax of <code>_swapFrom(tokenFrom, tokenTo, amountIn, minAmountOut)</code> to swap any tokens easily during <code>_harvestAndReport</code>.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="apr-oracles"><a href="https://github.com/yearn/tokenized-strategy-periphery/tree/master/src/AprOracle" target="_blank" rel="noopener noreferrer">APR Oracles</a><a class="hash-link" aria-label="Direct link to apr-oracles" title="Direct link to apr-oracles" href="/developers/v3/strategy_writing_guide#apr-oracles">​</a></h3>
<p>For easy integration with Vaults, front ends, debt allocators, etc. There is the option to create an <a href="https://github.com/yearn/tokenized-strategy-periphery/blob/master/src/AprOracle/AprOracleBase.sol" target="_blank" rel="noopener noreferrer">APR oracle</a> contract for your specific strategy that should return the expected APR of the Strategy based on some given <code>debtChange</code>.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="healthcheck"><a href="https://github.com/yearn/tokenized-strategy-periphery/tree/master/src/Bases/HealthCheck" target="_blank" rel="noopener noreferrer">HealthCheck</a><a class="hash-link" aria-label="Direct link to healthcheck" title="Direct link to healthcheck" href="/developers/v3/strategy_writing_guide#healthcheck">​</a></h3>
<p>To prevent automated reports from reporting losses/excessive profits that may not be accurate, a strategist can inherit and implement the <a href="https://github.com/yearn/tokenized-strategy-periphery/blob/master/src/Bases/HealthCheck/BaseHealthCheck.sol" target="_blank" rel="noopener noreferrer">HealthCheck</a> contract. This can ensure that a keeper will not call a report that may incorrectly realize incorrect losses or excessive gains. It can cause the report to revert if the gain/loss is outside of the desired bounds and will require manual intervention to ensure the strategy is reporting correctly.</p>
<p><strong>NOTE</strong>: It is recommended to implement some checks in <code>_harvestAndReport</code> for leveraged or manipulatable strategies that could report incorrect losses due to unforeseen circumstances.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="report-triggers"><a href="https://github.com/yearn/tokenized-strategy-periphery/tree/master/src/ReportTrigger" target="_blank" rel="noopener noreferrer">Report Triggers</a><a class="hash-link" aria-label="Direct link to report-triggers" title="Direct link to report-triggers" href="/developers/v3/strategy_writing_guide#report-triggers">​</a></h3>
<p>The expected behavior is that strategies report profits/losses on a schedule based on their specific <code>profitMaxUnlockTime</code> that management can customize. If a custom trigger cycle is desired or extra checks should be added a strategist can create their own <a href="https://github.com/yearn/tokenized-strategy-periphery/blob/master/src/ReportTrigger/CustomStrategyTriggerBase.sol" target="_blank" rel="noopener noreferrer">customReportTrigger</a> that can be added to the default contract for a specific strategy.</p>
<p>*More information can be found below in the &quot;Reporting&quot; section.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="testing">Testing<a class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing" href="/developers/v3/strategy_writing_guide#testing">​</a></h2>
<p>Due to the nature of the BaseStrategy utilizing an external contract for most of its logic, the default interface for any strategy will not allow proper testing of all functions. Testing of your Strategy should utilize the pre-built <a href="https://github.com/yearn/tokenized-strategy-foundry-mix/blob/master/src/interfaces/IStrategyInterface.sol" target="_blank" rel="noopener noreferrer">IStrategyInterface</a> to cast any deployed strategy through for testing, as seen in the testing setups in each mix. You can add any external functions you add for your specific strategy to this interface to test all functions with one variable.</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">Foundry Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Strategy _strategy </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Strategy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">asset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IStrategyInterface strategy </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">IStrategyInterface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">_strategy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">Ape Example</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">strategy </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> management</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">deploy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">project</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Strategy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> asset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">strategy </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">  project</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">IStrategyInterface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">at</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">strategy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Due to the permissionless nature of the Tokenized Strategies, all tests are written without integration with any allocator vault funding it. While those tests can be added, all V3 vaults utilize the ERC-4626 standard for deposit/withdraw and accounting, so they can be plugged in easily to any number of different vaults with the same <code>asset.</code></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="deployment">Deployment<a class="hash-link" aria-label="Direct link to Deployment" title="Direct link to Deployment" href="/developers/v3/strategy_writing_guide#deployment">​</a></h2>
<p>Building a factory that can be deployed once is recommended for strategies that will be used with multiple different assets. Then, all strategies can be deployed on the chain using the factory.</p>
<p><strong>Cloning is not recommended for Tokenized Strategies.</strong></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="contract-verification">Contract Verification<a class="hash-link" aria-label="Direct link to Contract Verification" title="Direct link to Contract Verification" href="/developers/v3/strategy_writing_guide#contract-verification">​</a></h3>
<p>Once the Strategy is deployed and verified, you must also verify the TokenizedStrategy functions. To do this, navigate to the /#code page on Etherscan.</p>
<ol>
<li>Click on the <code>More Options</code> drop-down menu.</li>
<li>Click &quot;is this a proxy?&quot;.</li>
<li>Click the &quot;Verify&quot; button.</li>
<li>Click &quot;Save&quot;.</li>
</ol>
<p>This should add all of the external <code>TokenizedStrategy</code> functions to the contract interface on Etherscan.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="operating-your-strategy">Operating Your strategy<a class="hash-link" aria-label="Direct link to Operating Your strategy" title="Direct link to Operating Your strategy" href="/developers/v3/strategy_writing_guide#operating-your-strategy">​</a></h2>
<p>Once deployed your strategy should be able to be interacted with as any other ERC-4626 vault.</p>
<p>In addition to the normal 4626 interface, Tokenized Strategies come built-in with some simple functions for management to properly maintain the strategy.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="reporting">Reporting<a class="hash-link" aria-label="Direct link to Reporting" title="Direct link to Reporting" href="/developers/v3/strategy_writing_guide#reporting">​</a></h3>
<p>The main operational procedure strategists need to take care of is the reporting of a strategy. Calling <code>report</code> on a strategy must be done by either the &#x27;management&#x27; or &#x27;keeper&#x27; address.</p>
<p>Reporting causes the strategy to accrue rewards, and record any gains or losses, as well as charge and pay fees. It is needed for the depositors of a vault to earn yield and for the strategist to earn fees.</p>
<p>It is recommended to build strategies on the assumption that reports will happen based on the strategies specific <code>profitMaxUnlockTime</code>.</p>
<p>Since reports are the only time _harvestAndReport will be called any strategies that need more frequent checks or updates should override the_tend and tendTrigger functions for any needed mid-report maintenance.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="keepers">Keepers<a class="hash-link" aria-label="Direct link to Keepers" title="Direct link to Keepers" href="/developers/v3/strategy_writing_guide#keepers">​</a></h4>
<p>The easiest way to ensure regular reports and tends on your strategy is to hook it up with a 3rd party keeper.</p>
<p>The recommended keeper network is the <a href="https://www.gelato.network/" target="_blank" rel="noopener noreferrer">Gelato Network</a>.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="setters">Setters<a class="hash-link" aria-label="Direct link to Setters" title="Direct link to Setters" href="/developers/v3/strategy_writing_guide#setters">​</a></h3>
<p>The strategy comes with some default variables that the management of a strategy can set and update.</p>
<ol>
<li>Changing management: Changing the strategies management is a two-step process. First, the current management must call <code>setPendingManagement(address)</code> with the desired address to transfer the management to. Then, that address must call <code>acceptManagement()</code> for the change to go into effect.</li>
<li>Keeper. A strategy manager can set a new address to be the keeper at any time with <code>setKeeper(address)</code>.</li>
<li>Emergency Admin. This will default to address(0) and can be set by the management with <code>setEmergencyAdmin(address)</code>.</li>
<li>Performance Fee. Management can adjust the amount of the gain realized during a report that gets charged as a performance fee with <code>setPerformanceFee(uint16)</code>.
**Subject to min and max.</li>
<li>Performance Fee Recipient. Set the address to receive the performance fees charged during a report with <code>setPerformanceFeeRecipient(address)</code>.</li>
<li>Profit Unlocking Period. Profits recorded during reports are slowly unlocked to depositors of a strategy over the strategy-specific &#x27;profitMaxUnlockTime&#x27;. This defaults to 10 days and can be changed at any time by the strategist with <code>setProfitMaxUnlockTime(uint256)</code>.</li>
</ol>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="emergencies">Emergencies<a class="hash-link" aria-label="Direct link to Emergencies" title="Direct link to Emergencies" href="/developers/v3/strategy_writing_guide#emergencies">​</a></h3>
<p>There are two default emergency functions built in. The first of which is <code>shutdownStrategy()</code>. This can only ever be called by the management or emergencyAdmin and is non-reversible.</p>
<p>Once this is called it will stop any further deposits or mints but will not affect any other functionality including withdraw, redeem, report and tend. This allows management to continue recording profits or losses and users to withdraw even post-shutdown.</p>
<p>This can be used in an emergency or simply to retire a vault.</p>
<p>Once a strategy is shut down management or the emergencyAdmin can also call <code>emergencyWithdraw(_amount)</code>, which will tell the strategy to withdraw a specified <code>_amount</code> from the yield source and keep it idle in the vault.</p>
<p>All other emergency functionality is left up to the individual strategist.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-06-20T16:00:46.000Z" itemprop="dateModified">Jun 20, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/developers/v3/Integrating_v3"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Integrating V3 Vaults</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/developers/v3/vault_management"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deploying and Managing a V3 Vault</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#overview">Overview</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#introduction">Introduction</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#why">Why?</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#definitions">Definitions</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#architecture">Architecture</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#getting-started">Getting started</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#strategy-writing">Strategy Writing</a><ul><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#_deployfundsuint256_amount"><em>_deployFunds(uint256_amount)</em></a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#_freefundsuint256_amount"><em>_freeFunds(uint256_amount)</em></a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#_harvestandreport"><em>_harvestAndReport()</em></a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#optional-functions">Optional Functions</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#availabledepositlimitaddress-_owner"><em>availableDepositLimit(address _owner)</em></a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#fyi">FYI</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#periphery">Periphery</a><ul><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#swappers">Swappers</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#apr-oracles">APR Oracles</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#healthcheck">HealthCheck</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#report-triggers">Report Triggers</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#testing">Testing</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#deployment">Deployment</a><ul><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#contract-verification">Contract Verification</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#operating-your-strategy">Operating Your strategy</a><ul><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#reporting">Reporting</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#setters">Setters</a></li><li><a class="table-of-contents__link toc-highlight" href="/developers/v3/strategy_writing_guide#emergencies">Emergencies</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">GitHub</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/yearn/yearn-vaults-v3" target="_blank" rel="noopener noreferrer" class="footer__link-item">V3 Vaults<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/yearn/tokenized-strategy" target="_blank" rel="noopener noreferrer" class="footer__link-item">V3 Tokenized Strategy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/yearn/tokenized-strategy-foundry-mix" target="_blank" rel="noopener noreferrer" class="footer__link-item">V3 Strategy Mix: Foundry<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/yearn/tokenized-strategy-ape-mix" target="_blank" rel="noopener noreferrer" class="footer__link-item">V3 Strategy Mix: Ape<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/yearn/yearn-vaults" target="_blank" rel="noopener noreferrer" class="footer__link-item">V2 Vaults<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/yearn/brownie-strategy-mix" target="_blank" rel="noopener noreferrer" class="footer__link-item">V2 Strategy Mix<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/yearn/yearn-security" target="_blank" rel="noopener noreferrer" class="footer__link-item">yearn-security<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/yearn/yearn-devdocs" target="_blank" rel="noopener noreferrer" class="footer__link-item">yearn-devdocs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Ecosystem</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://yearn.fi/v3" target="_blank" rel="noopener noreferrer" class="footer__link-item">V3 Vaults<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://yearn.fi/vaults" target="_blank" rel="noopener noreferrer" class="footer__link-item">V2 Vaults<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juiced.yearn.fi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Juiced Vaults<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://veyfi.yearn.fi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">veYFI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://yeth.yearn.fi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">yETH<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ycrv.yearn.fi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">yCRV<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://yprisma.yearn.fi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">yPrisma<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ybribe.yearn.fi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">yBribe<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/b8ENPNqG5c" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/yearnfi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/yearnfinance/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/iearn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gov.yearn.fi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://snapshot.org/#/veyfi.eth" target="_blank" rel="noopener noreferrer" class="footer__link-item">Snapshot Voting<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>
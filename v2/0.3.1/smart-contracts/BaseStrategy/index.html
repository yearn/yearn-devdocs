<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<link rel="alternate" type="application/rss+xml" href="/yearn-devdocs/blog/rss.xml" title="Yearn.finance Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/yearn-devdocs/blog/atom.xml" title="Yearn.finance Blog Atom Feed"><title data-react-helmet="true">BaseStrategy | Yearn.finance</title><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/yearn-devdocs/v2/0.3.1/smart-contracts/BaseStrategy"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="0.3.1"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-0.3.1"><meta data-react-helmet="true" property="og:title" content="BaseStrategy | Yearn.finance"><meta data-react-helmet="true" name="description" content="Functions"><meta data-react-helmet="true" property="og:description" content="Functions"><link data-react-helmet="true" rel="shortcut icon" href="/yearn-devdocs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/yearn-devdocs/v2/0.3.1/smart-contracts/BaseStrategy"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/yearn-devdocs/v2/0.3.1/smart-contracts/BaseStrategy" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/yearn-devdocs/v2/0.3.1/smart-contracts/BaseStrategy" hreflang="x-default"><link rel="stylesheet" href="/yearn-devdocs/assets/css/styles.39f8527d.css">
<link rel="preload" href="/yearn-devdocs/assets/js/styles.e5d6da45.js" as="script">
<link rel="preload" href="/yearn-devdocs/assets/js/runtime~main.5a965e0d.js" as="script">
<link rel="preload" href="/yearn-devdocs/assets/js/main.9c14470c.js" as="script">
<link rel="preload" href="/yearn-devdocs/assets/js/1.5e3dea72.js" as="script">
<link rel="preload" href="/yearn-devdocs/assets/js/2.9c165791.js" as="script">
<link rel="preload" href="/yearn-devdocs/assets/js/165.6c5c6684.js" as="script">
<link rel="preload" href="/yearn-devdocs/assets/js/166.62528032.js" as="script">
<link rel="preload" href="/yearn-devdocs/assets/js/33762072.167fd159.js" as="script">
<link rel="preload" href="/yearn-devdocs/assets/js/17896441.fa2c7a07.js" as="script">
<link rel="preload" href="/yearn-devdocs/assets/js/a57f39c1.01eab501.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/yearn-devdocs/"><img src="/yearn-devdocs/img/logo.svg" alt="YFI Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/yearn-devdocs/img/logo.svg" alt="YFI Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Yearn.finance</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/yearn-devdocs/v2/0.3.1/smart-contracts/vault">Smart Contracts</a><a class="navbar__item navbar__link" href="/yearn-devdocs/partners/introduction">Partners</a><a class="navbar__item navbar__link" href="/yearn-devdocs/contributing/index">Contributing</a><a class="navbar__item navbar__link" href="/yearn-devdocs/resources/index">Resources</a><a class="navbar__item navbar__link" href="/yearn-devdocs/securityResearchers/index">Security researchers</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/yearn-devdocs/v2/0.3.1/smart-contracts/BaseStrategy">0.3.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/yearn-devdocs/v2/next/smart-contracts/BaseStrategy">Next</a></li><li><a class="dropdown__link" href="/yearn-devdocs/v2/smart-contracts/BaseStrategy">0.4.2</a></li><li><a class="dropdown__link" href="/yearn-devdocs/v2/0.3.5/smart-contracts/BaseStrategy">0.3.5</a></li><li><a class="dropdown__link" href="/yearn-devdocs/v2/0.3.4/smart-contracts/BaseStrategy">0.3.4</a></li><li><a class="dropdown__link" href="/yearn-devdocs/v2/0.3.3/smart-contracts/BaseStrategy">0.3.3</a></li><li><a class="dropdown__link" href="/yearn-devdocs/v2/0.3.2/smart-contracts/BaseStrategy">0.3.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/yearn-devdocs/v2/0.3.1/smart-contracts/BaseStrategy">0.3.1</a></li><li><a class="dropdown__link" href="/yearn-devdocs/v2/0.3.0/smart-contracts/BaseStrategy">0.3.0</a></li></ul></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/yearn-devdocs/"><img src="/yearn-devdocs/img/logo.svg" alt="YFI Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/yearn-devdocs/img/logo.svg" alt="YFI Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Yearn.finance</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/yearn-devdocs/v2/0.3.1/smart-contracts/vault">Smart Contracts</a></li><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/partners/introduction">Partners</a></li><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/contributing/index">Contributing</a></li><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/resources/index">Resources</a></li><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/securityResearchers/index">Security researchers</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/v2/next/smart-contracts/BaseStrategy">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/v2/smart-contracts/BaseStrategy">0.4.2</a></li><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/v2/0.3.5/smart-contracts/BaseStrategy">0.3.5</a></li><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/v2/0.3.4/smart-contracts/BaseStrategy">0.3.4</a></li><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/v2/0.3.3/smart-contracts/BaseStrategy">0.3.3</a></li><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/v2/0.3.2/smart-contracts/BaseStrategy">0.3.2</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/yearn-devdocs/v2/0.3.1/smart-contracts/BaseStrategy">0.3.1</a></li><li class="menu__list-item"><a class="menu__link" href="/yearn-devdocs/v2/0.3.0/smart-contracts/BaseStrategy">0.3.0</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">smart-contracts</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/yearn-devdocs/v2/0.3.1/smart-contracts/BaseStrategy">BaseStrategy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/yearn-devdocs/v2/0.3.1/smart-contracts/StrategyAPI">StrategyAPI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/yearn-devdocs/v2/0.3.1/smart-contracts/VaultAPI">VaultAPI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/yearn-devdocs/v2/0.3.1/smart-contracts/registry">Registry.vy</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">test</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/yearn-devdocs/v2/0.3.1/smart-contracts/test/TestGuestList">TestGuestList</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/yearn-devdocs/v2/0.3.1/smart-contracts/test/TestStrategy">TestStrategy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/yearn-devdocs/v2/0.3.1/smart-contracts/test/Token">Token</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/yearn-devdocs/v2/0.3.1/smart-contracts/vault">Vault.vy</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Yearn.finance <strong>0.3.1</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/yearn-devdocs/v2/smart-contracts/BaseStrategy">latest version</a></strong> (0.4.2).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: 0.3.1</span></div><header><h1 class="docTitle_3a4h">BaseStrategy</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="functions"></a>Functions<a class="hash-link" href="#functions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="apiversion"></a>apiVersion<a class="hash-link" href="#apiversion" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function apiVersion(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) public returns (string)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Used to track which version of <code>StrategyAPI</code> this Strategy
implements.</p><p>The Strategy&#x27;s version must match the Vault&#x27;s <code>API_VERSION</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values"></a>Return Values:<a class="hash-link" href="#return-values" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>A</code></td><td align="left"></td><td align="left">string which holds the current API version of this contract.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="name"></a>name<a class="hash-link" href="#name" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function name(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (string)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This Strategy&#x27;s name.
@dev
You can use this field to manage the &quot;version&quot; of this Strategy, e.g.
<code>StrategySomethingOrOtherV1</code>. However, &quot;API Version&quot; is managed by
<code>apiVersion()</code> function above.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-1"></a>Return Values:<a class="hash-link" href="#return-values-1" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>This</code></td><td align="left"></td><td align="left">Strategy&#x27;s name.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="delegatedassets"></a>delegatedAssets<a class="hash-link" href="#delegatedassets" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function delegatedAssets(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> The amount (priced in want) of the total assets managed by this strategy should not count
towards Yearn&#x27;s TVL calculations.
@dev
You can override this field to set it to a non-zero value if some of the assets of this
Strategy is somehow delegated inside another part of of Yearn&#x27;s ecosystem e.g. another Vault.
Note that this value must be strictly less than or equal to the amount provided by
<code>estimatedTotalAssets()</code> below, as the TVL calc will be total assets minus delegated assets.
@return
The amount of assets this strategy manages that should not be included in Yearn&#x27;s Total Value
Locked (TVL) calculation across it&#x27;s ecosystem.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="constructor"></a>constructor<a class="hash-link" href="#constructor" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function constructor(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address _vault</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) public</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Initializes the Strategy, this is called only once, when the
contract is deployed.</p><p><code>_vault</code> should implement <code>VaultAPI</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters"></a>Parameters:<a class="hash-link" href="#parameters" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_vault</code></td><td align="left">address</td><td align="left">The address of the Vault responsible for this Strategy.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setstrategist"></a>setStrategist<a class="hash-link" href="#setstrategist" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setStrategist(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address _strategist</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Used to change <code>strategist</code>.</p><p> This may only be called by governance or the existing strategist.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-1"></a>Parameters:<a class="hash-link" href="#parameters-1" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_strategist</code></td><td align="left">address</td><td align="left">The new address to assign as <code>strategist</code>.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setkeeper"></a>setKeeper<a class="hash-link" href="#setkeeper" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setKeeper(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address _keeper</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Used to change <code>keeper</code>.</p><p> <code>keeper</code> is the only address that may call <code>tend()</code> or <code>harvest()</code>,
other than <code>governance()</code> or <code>strategist</code>. However, unlike
<code>governance()</code> or <code>strategist</code>, <code>keeper</code> may <em>only</em> call <code>tend()</code>
and <code>harvest()</code>, and no other authorized functions, following the
principle of least privilege.</p><p> This may only be called by governance or the strategist.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-2"></a>Parameters:<a class="hash-link" href="#parameters-2" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_keeper</code></td><td align="left">address</td><td align="left">The new address to assign as <code>keeper</code>.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setrewards"></a>setRewards<a class="hash-link" href="#setrewards" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setRewards(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address _rewards</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Used to change <code>rewards</code>. EOA or smart contract which has the permission
to pull rewards from the vault.</p><p> This may only be called by the strategist.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-3"></a>Parameters:<a class="hash-link" href="#parameters-3" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_rewards</code></td><td align="left">address</td><td align="left">The address to use for pulling rewards.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setmaxreportdelay"></a>setMaxReportDelay<a class="hash-link" href="#setmaxreportdelay" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setMaxReportDelay(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 _delay</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Used to change <code>maxReportDelay</code>. <code>maxReportDelay</code> is the maximum number
of blocks that should pass for <code>harvest()</code> to be called.</p><p> For external keepers (such as the Keep3r network), this is the maximum
time between jobs to wait. (see <code>harvestTrigger()</code>
for more details.)</p><p> This may only be called by governance or the strategist.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-4"></a>Parameters:<a class="hash-link" href="#parameters-4" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_delay</code></td><td align="left">uint256</td><td align="left">The maximum number of seconds to wait between harvests.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setprofitfactor"></a>setProfitFactor<a class="hash-link" href="#setprofitfactor" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setProfitFactor(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 _profitFactor</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Used to change <code>profitFactor</code>. <code>profitFactor</code> is used to determine
if it&#x27;s worthwhile to harvest, given gas costs. (See <code>harvestTrigger()</code>
for more details.)</p><p> This may only be called by governance or the strategist.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-5"></a>Parameters:<a class="hash-link" href="#parameters-5" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_profitFactor</code></td><td align="left">uint256</td><td align="left">A ratio to multiply anticipated</td></tr></tbody></table><p><code>harvest()</code> gas cost against.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setdebtthreshold"></a>setDebtThreshold<a class="hash-link" href="#setdebtthreshold" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setDebtThreshold(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 _debtThreshold</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Sets how far the Strategy can go into loss without a harvest and report
being required.</p><p> By default this is 0, meaning any losses would cause a harvest which
will subsequently report the loss to the Vault for tracking. (See
<code>harvestTrigger()</code> for more details.)</p><p> This may only be called by governance or the strategist.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-6"></a>Parameters:<a class="hash-link" href="#parameters-6" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_debtThreshold</code></td><td align="left">uint256</td><td align="left">How big of a loss this Strategy may carry without</td></tr></tbody></table><p>being required to report to the Vault.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setmetadatauri"></a>setMetadataURI<a class="hash-link" href="#setmetadatauri" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setMetadataURI(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string _metadataURI</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Used to change <code>metadataURI</code>. <code>metadataURI</code> is used to store the URI
of the file describing the strategy.</p><p> This may only be called by governance or the strategist.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-7"></a>Parameters:<a class="hash-link" href="#parameters-7" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_metadataURI</code></td><td align="left">string</td><td align="left">The URI that describe the strategy.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="governance"></a>governance<a class="hash-link" href="#governance" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function governance(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (address)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Resolve governance address from Vault contract, used to make assertions
on protected functions in the Strategy.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="estimatedtotalassets"></a>estimatedTotalAssets<a class="hash-link" href="#estimatedtotalassets" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function estimatedTotalAssets(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) public returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Provide an accurate estimate for the total amount of assets
(principle + return) that this Strategy is currently managing,
denominated in terms of <code>want</code> tokens.</p><p> This total should be &quot;realizable&quot; e.g. the total value that could
<em>actually</em> be obtained from this Strategy if it were to divest its
entire position based on current on-chain conditions.
@dev
Care must be taken in using this function, since it relies on external
systems, which could be manipulated by the attacker to give an inflated
(or reduced) value produced by this function, based on current on-chain
conditions (e.g. this function is possible to influence through
flashloan attacks, oracle manipulations, or other DeFi attack
mechanisms).</p><p> It is up to governance to use this function to correctly order this
Strategy relative to its peers in the withdrawal queue to minimize
losses for the Vault based on sudden withdrawals. This value should be
higher than the total debt of the Strategy and higher than its expected
value to be &quot;safe&quot;.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-2"></a>Return Values:<a class="hash-link" href="#return-values-2" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>The</code></td><td align="left"></td><td align="left">estimated total assets in this Strategy.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="isactive"></a>isActive<a class="hash-link" href="#isactive" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function isActive(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) public returns (bool)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="preparereturn"></a>prepareReturn<a class="hash-link" href="#preparereturn" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function prepareReturn(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256 _profit, uint256 _loss, uint256 _debtPayment)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Perform any Strategy unwinding or other calls necessary to capture the
&quot;free return&quot; this Strategy has generated since the last time its core
position(s) were adjusted. Examples include unwrapping extra rewards.
This call is only used during &quot;normal operation&quot; of a Strategy, and
should be optimized to minimize losses as much as possible.</p><p>This method returns any realized profits and/or realized losses
incurred, and should return the total amounts of profits/losses/debt
payments (in <code>want</code> tokens) for the Vault&#x27;s accounting (e.g.
<code>want.balanceOf(this) &gt;= _debtPayment + _profit - _loss</code>).</p><p><code>_debtOutstanding</code> will be 0 if the Strategy is not past the configured
debt limit, otherwise its value will be how far past the debt limit
the Strategy is. The Strategy&#x27;s debt limit is configured in the Vault.</p><p>NOTE: <code>_debtPayment</code> should be less than or equal to <code>_debtOutstanding</code>.
It is okay for it to be less than <code>_debtOutstanding</code>, as that
should only used as a guide for how much is left to pay back.
Payments should be made to minimize loss from slippage, debt,
withdrawal fees, etc.</p><p>See <code>vault.debtOutstanding()</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="adjustposition"></a>adjustPosition<a class="hash-link" href="#adjustposition" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function adjustPosition(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Perform any adjustments to the core position(s) of this Strategy given
what change the Vault made in the &quot;investable capital&quot; available to the
Strategy. Note that all &quot;free capital&quot; in the Strategy after the report
was made is available for reinvestment. Also note that this number
could be 0, and you should handle that scenario accordingly.</p><p>See comments regarding <code>_debtOutstanding</code> on <code>prepareReturn()</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="liquidateposition"></a>liquidatePosition<a class="hash-link" href="#liquidateposition" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function liquidatePosition(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256 _liquidatedAmount, uint256 _loss)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Liquidate up to <code>_amountNeeded</code> of <code>want</code> of this strategy&#x27;s positions,
irregardless of slippage. Any excess will be re-invested with <code>adjustPosition()</code>.
This function should return the amount of <code>want</code> tokens made available by the
liquidation. If there is a difference between them, <code>_loss</code> indicates whether the
difference is due to a realized loss, or if there is some other sitution at play
(e.g. locked funds) where the amount made available is less than what is needed.
This function is used during emergency exit instead of <code>prepareReturn()</code> to
liquidate all of the Strategy&#x27;s positions back to the Vault.</p><p>NOTE: The invariant <code>_liquidatedAmount + _loss &lt;= _amountNeeded</code> should always be maintained</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tendtrigger"></a>tendTrigger<a class="hash-link" href="#tendtrigger" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function tendTrigger(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 callCost</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) public returns (bool)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Provide a signal to the keeper that <code>tend()</code> should be called. The
keeper will provide the estimated gas cost that they would pay to call
<code>tend()</code>, and this function should use that estimate to make a
determination if calling it is &quot;worth it&quot; for the keeper. This is not
the only consideration into issuing this trigger, for example if the
position would be negatively affected if <code>tend()</code> is not called
shortly, then this can return <code>true</code> even if the keeper might be
&quot;at a loss&quot; (keepers are always reimbursed by Yearn).
@dev
<code>callCost</code> must be priced in terms of <code>want</code>.</p><p> This call and <code>harvestTrigger()</code> should never return <code>true</code> at the same
time.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-8"></a>Parameters:<a class="hash-link" href="#parameters-8" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>callCost</code></td><td align="left">uint256</td><td align="left">The keeper&#x27;s estimated cast cost to call <code>tend()</code>.</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-3"></a>Return Values:<a class="hash-link" href="#return-values-3" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>if</code></td><td align="left">uint256</td><td align="left"><code>tend()</code> should be called, <code>false</code> otherwise.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tend"></a>tend<a class="hash-link" href="#tend" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function tend(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Adjust the Strategy&#x27;s position. The purpose of tending isn&#x27;t to
realize gains, but to maximize yield by reinvesting any returns.</p><p> See comments on <code>adjustPosition()</code>.</p><p> This may only be called by governance, the strategist, or the keeper.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="harvesttrigger"></a>harvestTrigger<a class="hash-link" href="#harvesttrigger" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function harvestTrigger(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 callCost</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) public returns (bool)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Provide a signal to the keeper that <code>harvest()</code> should be called. The
keeper will provide the estimated gas cost that they would pay to call
<code>harvest()</code>, and this function should use that estimate to make a
determination if calling it is &quot;worth it&quot; for the keeper. This is not
the only consideration into issuing this trigger, for example if the
position would be negatively affected if <code>harvest()</code> is not called
shortly, then this can return <code>true</code> even if the keeper might be &quot;at a
loss&quot; (keepers are always reimbursed by Yearn).
@dev
<code>callCost</code> must be priced in terms of <code>want</code>.</p><p> This call and <code>tendTrigger</code> should never return <code>true</code> at the
same time.</p><p> See <code>maxReportDelay</code>, <code>profitFactor</code>, <code>debtThreshold</code> to adjust the
strategist-controlled parameters that will influence whether this call
returns <code>true</code> or not. These parameters will be used in conjunction
with the parameters reported to the Vault (see <code>params</code>) to determine
if calling <code>harvest()</code> is merited.</p><p> It is expected that an external system will check <code>harvestTrigger()</code>.
This could be a script run off a desktop or cloud bot (e.g.
<a href="https://github.com/iearn-finance/yearn-vaults/blob/master/scripts/keep.py" target="_blank" rel="noopener noreferrer">https://github.com/iearn-finance/yearn-vaults/blob/master/scripts/keep.py</a>),
or via an integration with the Keep3r network (e.g.
<a href="https://github.com/Macarse/GenericKeep3rV2/blob/master/contracts/keep3r/GenericKeep3rV2.sol" target="_blank" rel="noopener noreferrer">https://github.com/Macarse/GenericKeep3rV2/blob/master/contracts/keep3r/GenericKeep3rV2.sol</a>).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-9"></a>Parameters:<a class="hash-link" href="#parameters-9" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>callCost</code></td><td align="left">uint256</td><td align="left">The keeper&#x27;s estimated cast cost to call <code>harvest()</code>.</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-4"></a>Return Values:<a class="hash-link" href="#return-values-4" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>if</code></td><td align="left">uint256</td><td align="left"><code>harvest()</code> should be called, <code>false</code> otherwise.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="harvest"></a>harvest<a class="hash-link" href="#harvest" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function harvest(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Harvests the Strategy, recognizing any profits or losses and adjusting
the Strategy&#x27;s position.</p><p> In the rare case the Strategy is in emergency shutdown, this will exit
the Strategy&#x27;s position.</p><p> This may only be called by governance, the strategist, or the keeper.
@dev
When <code>harvest()</code> is called, the Strategy reports to the Vault (via
<code>vault.report()</code>), so in some cases <code>harvest()</code> must be called in order
to take in profits, to borrow newly available funds from the Vault, or
otherwise adjust its position. In other cases <code>harvest()</code> must be
called to report to the Vault on the Strategy&#x27;s position, especially if
any losses have occurred.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="withdraw"></a>withdraw<a class="hash-link" href="#withdraw" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function withdraw(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 _amountNeeded</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256 _loss)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Withdraws <code>_amountNeeded</code> to <code>vault</code>.</p><p> This may only be called by the Vault.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-10"></a>Parameters:<a class="hash-link" href="#parameters-10" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_amountNeeded</code></td><td align="left">uint256</td><td align="left">How much <code>want</code> to withdraw.</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-5"></a>Return Values:<a class="hash-link" href="#return-values-5" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_loss</code></td><td align="left">uint256</td><td align="left">Any realized losses</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="preparemigration"></a>prepareMigration<a class="hash-link" href="#preparemigration" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function prepareMigration(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Do anything necessary to prepare this Strategy for migration, such as
transferring any reserve or LP tokens, CDPs, or other tokens or stores of
value.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="migrate"></a>migrate<a class="hash-link" href="#migrate" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function migrate(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address _newStrategy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Transfers all <code>want</code> from this Strategy to <code>_newStrategy</code>.</p><p> This may only be called by governance or the Vault.
@dev
The new Strategy&#x27;s Vault must be the same as this Strategy&#x27;s Vault.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-11"></a>Parameters:<a class="hash-link" href="#parameters-11" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_newStrategy</code></td><td align="left">address</td><td align="left">The Strategy to migrate to.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setemergencyexit"></a>setEmergencyExit<a class="hash-link" href="#setemergencyexit" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setEmergencyExit(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Activates emergency exit. Once activated, the Strategy will exit its
position upon the next harvest, depositing all funds into the Vault as
quickly as is reasonable given on-chain conditions.</p><p> This may only be called by governance or the strategist.
@dev
See <code>vault.setEmergencyShutdown()</code> and <code>harvest()</code> for further details.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="protectedtokens"></a>protectedTokens<a class="hash-link" href="#protectedtokens" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function protectedTokens(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (address[])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Override this to add all tokens/tokenized positions this contract
manages on a <em>persistent</em> basis (e.g. not just for swapping back to
want ephemerally).</p><p>NOTE: Do <em>not</em> include <code>want</code>, already included in <code>sweep</code> below.</p><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">   function protectedTokens() internal override view returns (address[] memory) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     address[] memory protected = new address[](3);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     protected[0] = tokenA;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     protected[1] = tokenB;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     protected[2] = tokenC;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     return protected;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sweep"></a>sweep<a class="hash-link" href="#sweep" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function sweep(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address _token</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> Removes tokens from this Strategy that are not the type of tokens
managed by this Strategy. This may be used in case of accidentally
sending the wrong kind of token to this Strategy.</p><p> Tokens will be sent to <code>governance()</code>.</p><p> This will fail if an attempt is made to sweep <code>want</code>, or any tokens
that are protected by this Strategy.</p><p> This may only be called by governance.
@dev
Implement <code>protectedTokens()</code> to specify any additional tokens that
should be protected from sweeping in addition to <code>want</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-12"></a>Parameters:<a class="hash-link" href="#parameters-12" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_token</code></td><td align="left">address</td><td align="left">The token to transfer out of this vault.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="events"></a>Events<a class="hash-link" href="#events" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="harvested"></a>Harvested<a class="hash-link" href="#harvested" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event Harvested(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="updatedstrategist"></a>UpdatedStrategist<a class="hash-link" href="#updatedstrategist" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event UpdatedStrategist(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="updatedkeeper"></a>UpdatedKeeper<a class="hash-link" href="#updatedkeeper" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event UpdatedKeeper(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="updatedrewards"></a>UpdatedRewards<a class="hash-link" href="#updatedrewards" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event UpdatedRewards(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="updatedreportdelay"></a>UpdatedReportDelay<a class="hash-link" href="#updatedreportdelay" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event UpdatedReportDelay(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="updatedprofitfactor"></a>UpdatedProfitFactor<a class="hash-link" href="#updatedprofitfactor" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event UpdatedProfitFactor(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="updateddebtthreshold"></a>UpdatedDebtThreshold<a class="hash-link" href="#updateddebtthreshold" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event UpdatedDebtThreshold(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="emergencyexitenabled"></a>EmergencyExitEnabled<a class="hash-link" href="#emergencyexitenabled" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event EmergencyExitEnabled(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="updatedmetadatauri"></a>UpdatedMetadataURI<a class="hash-link" href="#updatedmetadatauri" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event UpdatedMetadataURI(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/yearn/yearn-devdocs/edit/master/website/versioned_docs/version-0.3.1/smart-contracts/BaseStrategy.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/yearn-devdocs/v2/0.3.1/smart-contracts/StrategyAPI"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">StrategyAPI Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#functions" class="table-of-contents__link">Functions</a><ul><li><a href="#apiversion" class="table-of-contents__link">apiVersion</a></li><li><a href="#name" class="table-of-contents__link">name</a></li><li><a href="#delegatedassets" class="table-of-contents__link">delegatedAssets</a></li><li><a href="#constructor" class="table-of-contents__link">constructor</a></li><li><a href="#setstrategist" class="table-of-contents__link">setStrategist</a></li><li><a href="#setkeeper" class="table-of-contents__link">setKeeper</a></li><li><a href="#setrewards" class="table-of-contents__link">setRewards</a></li><li><a href="#setmaxreportdelay" class="table-of-contents__link">setMaxReportDelay</a></li><li><a href="#setprofitfactor" class="table-of-contents__link">setProfitFactor</a></li><li><a href="#setdebtthreshold" class="table-of-contents__link">setDebtThreshold</a></li><li><a href="#setmetadatauri" class="table-of-contents__link">setMetadataURI</a></li><li><a href="#governance" class="table-of-contents__link">governance</a></li><li><a href="#estimatedtotalassets" class="table-of-contents__link">estimatedTotalAssets</a></li><li><a href="#isactive" class="table-of-contents__link">isActive</a></li><li><a href="#preparereturn" class="table-of-contents__link">prepareReturn</a></li><li><a href="#adjustposition" class="table-of-contents__link">adjustPosition</a></li><li><a href="#liquidateposition" class="table-of-contents__link">liquidatePosition</a></li><li><a href="#tendtrigger" class="table-of-contents__link">tendTrigger</a></li><li><a href="#tend" class="table-of-contents__link">tend</a></li><li><a href="#harvesttrigger" class="table-of-contents__link">harvestTrigger</a></li><li><a href="#harvest" class="table-of-contents__link">harvest</a></li><li><a href="#withdraw" class="table-of-contents__link">withdraw</a></li><li><a href="#preparemigration" class="table-of-contents__link">prepareMigration</a></li><li><a href="#migrate" class="table-of-contents__link">migrate</a></li><li><a href="#setemergencyexit" class="table-of-contents__link">setEmergencyExit</a></li><li><a href="#protectedtokens" class="table-of-contents__link">protectedTokens</a></li><li><a href="#sweep" class="table-of-contents__link">sweep</a></li></ul></li><li><a href="#events" class="table-of-contents__link">Events</a><ul><li><a href="#harvested" class="table-of-contents__link">Harvested</a></li><li><a href="#updatedstrategist" class="table-of-contents__link">UpdatedStrategist</a></li><li><a href="#updatedkeeper" class="table-of-contents__link">UpdatedKeeper</a></li><li><a href="#updatedrewards" class="table-of-contents__link">UpdatedRewards</a></li><li><a href="#updatedreportdelay" class="table-of-contents__link">UpdatedReportDelay</a></li><li><a href="#updatedprofitfactor" class="table-of-contents__link">UpdatedProfitFactor</a></li><li><a href="#updateddebtthreshold" class="table-of-contents__link">UpdatedDebtThreshold</a></li><li><a href="#emergencyexitenabled" class="table-of-contents__link">EmergencyExitEnabled</a></li><li><a href="#updatedmetadatauri" class="table-of-contents__link">UpdatedMetadataURI</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://gov.yearn.finance/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discourse</a></li><li class="footer__item"><a href="https://discord.yearn.finance/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/iearnfinance" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/yearn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 yearn.finance. Built with Docusaurus.</div></div></div></footer></div>
<script src="/yearn-devdocs/assets/js/styles.e5d6da45.js"></script>
<script src="/yearn-devdocs/assets/js/runtime~main.5a965e0d.js"></script>
<script src="/yearn-devdocs/assets/js/main.9c14470c.js"></script>
<script src="/yearn-devdocs/assets/js/1.5e3dea72.js"></script>
<script src="/yearn-devdocs/assets/js/2.9c165791.js"></script>
<script src="/yearn-devdocs/assets/js/165.6c5c6684.js"></script>
<script src="/yearn-devdocs/assets/js/166.62528032.js"></script>
<script src="/yearn-devdocs/assets/js/33762072.167fd159.js"></script>
<script src="/yearn-devdocs/assets/js/17896441.fa2c7a07.js"></script>
<script src="/yearn-devdocs/assets/js/a57f39c1.01eab501.js"></script>
</body>
</html>